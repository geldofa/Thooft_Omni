import{r as l,j as e,J,M as K,N as I,O as Q,Q as B,R as _,U as V,V as W,a as Y,W as Z,u as ee,B as w,T as se,D as te,b as ae,d as re,e as ne,f as ie,L as E,X as ce,o as oe,t as D}from"./index-BAKIICto.js";import{T as de,a as le,b as P,c as y,d as he,e as k}from"./table-BL6Jb_kA.js";import{B as A}from"./badge-TVF9n0Wa.js";import{S as ue,A as pe,a as xe,b as me,c as fe,d as ge,e as je,f as be,g as ve,h as Ce}from"./alert-dialog-XDTm3zgn.js";import{S as ke}from"./switch-D8-5Ig8i.js";import{P as ye}from"./plus-eYQ6bM3j.js";var O="Checkbox",[Ne]=J(O),[we,R]=Ne(O);function De(r){const{__scopeCheckbox:d,checked:h,children:p,defaultChecked:o,disabled:t,form:f,name:x,onCheckedChange:i,required:m,value:n="on",internal_do_not_use_render:c}=r,[u,g]=Q({prop:h,defaultProp:o??!1,onChange:i,caller:O}),[j,b]=l.useState(null),[C,s]=l.useState(null),a=l.useRef(!1),N=j?!!f||!!j.closest("form"):!0,S={checked:u,disabled:t,setChecked:g,control:j,setControl:b,name:x,form:f,value:n,hasConsumerStoppedPropagationRef:a,required:m,defaultChecked:v(o)?!1:o,isFormControl:N,bubbleInput:C,setBubbleInput:s};return e.jsx(we,{scope:d,...S,children:Ae(c)?c(S):p})}var F="CheckboxTrigger",M=l.forwardRef(({__scopeCheckbox:r,onKeyDown:d,onClick:h,...p},o)=>{const{control:t,value:f,disabled:x,checked:i,required:m,setControl:n,setChecked:c,hasConsumerStoppedPropagationRef:u,isFormControl:g,bubbleInput:j}=R(F,r),b=B(o,n),C=l.useRef(i);return l.useEffect(()=>{const s=t?.form;if(s){const a=()=>c(C.current);return s.addEventListener("reset",a),()=>s.removeEventListener("reset",a)}},[t,c]),e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":v(i)?"mixed":i,"aria-required":m,"data-state":$(i),"data-disabled":x?"":void 0,disabled:x,value:f,...p,ref:b,onKeyDown:_(d,s=>{s.key==="Enter"&&s.preventDefault()}),onClick:_(h,s=>{c(a=>v(a)?!0:!a),j&&g&&(u.current=s.isPropagationStopped(),u.current||s.stopPropagation())})})});M.displayName=F;var L=l.forwardRef((r,d)=>{const{__scopeCheckbox:h,name:p,checked:o,defaultChecked:t,required:f,disabled:x,value:i,onCheckedChange:m,form:n,...c}=r;return e.jsx(De,{__scopeCheckbox:h,checked:o,defaultChecked:t,disabled:x,required:f,onCheckedChange:m,name:p,form:n,value:i,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(M,{...c,ref:d,__scopeCheckbox:h}),u&&e.jsx(z,{__scopeCheckbox:h})]})})});L.displayName=O;var U="CheckboxIndicator",H=l.forwardRef((r,d)=>{const{__scopeCheckbox:h,forceMount:p,...o}=r,t=R(U,h);return e.jsx(K,{present:p||v(t.checked)||t.checked===!0,children:e.jsx(I.span,{"data-state":$(t.checked),"data-disabled":t.disabled?"":void 0,...o,ref:d,style:{pointerEvents:"none",...r.style}})})});H.displayName=U;var q="CheckboxBubbleInput",z=l.forwardRef(({__scopeCheckbox:r,...d},h)=>{const{control:p,hasConsumerStoppedPropagationRef:o,checked:t,defaultChecked:f,required:x,disabled:i,name:m,value:n,form:c,bubbleInput:u,setBubbleInput:g}=R(q,r),j=B(h,g),b=V(t),C=W(p);l.useEffect(()=>{const a=u;if(!a)return;const N=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(N,"checked").set,X=!o.current;if(b!==t&&T){const G=new Event("click",{bubbles:X});a.indeterminate=v(t),T.call(a,v(t)?!1:t),a.dispatchEvent(G)}},[u,b,t,o]);const s=l.useRef(v(t)?!1:t);return e.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??s.current,required:x,disabled:i,name:m,value:n,form:c,...d,tabIndex:-1,ref:j,style:{...d.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});z.displayName=q;function Ae(r){return typeof r=="function"}function v(r){return r==="indeterminate"}function $(r){return v(r)?"indeterminate":r?"checked":"unchecked"}function Oe({className:r,...d}){return e.jsx(L,{"data-slot":"checkbox",className:Y("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...d,children:e.jsx(H,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Z,{className:"size-3.5"})})})}const Se=["Lithoman","C80","C818"];function Be(){const{operators:r,addOperator:d,updateOperator:h,deleteOperator:p,addActivityLog:o,user:t}=ee(),[f,x]=l.useState(!1),[i,m]=l.useState(null),[n,c]=l.useState({name:"",presses:[],active:!0}),u=s=>{s?(m(s),c({name:s.name,presses:s.presses,active:s.active})):(m(null),c({name:"",presses:[],active:!0}),x(!0))},g=()=>{x(!1),m(null),c({name:"",presses:[],active:!0})},j=s=>{c(a=>({...a,presses:a.presses.includes(s)?a.presses.filter(N=>N!==s):[...a.presses,s]}))},b=s=>{if(s.preventDefault(),!n.name.trim()){D.error("Please enter operator name");return}if(n.presses.length===0){D.error("Please select at least one press");return}if(i){const a={...i,...n};h(a),D.success("Operator updated successfully"),o({user:t?.username||"Unknown",action:"Updated",entity:"Operator",entityId:i.id,entityName:n.name,details:`Updated operator presses: ${n.presses.join(", ")}`})}else{const a={...n,id:Date.now().toString()};d({...n,canEditTasks:!1,canAccessOperatorManagement:!1}),D.success("Operator added successfully"),o({user:t?.username||"Unknown",action:"Created",entity:"Operator",entityId:a.id,entityName:n.name,details:`Added new operator with presses: ${n.presses.join(", ")}`})}g()},C=(s,a)=>{p(s),D.success(`Operator "${a}" deleted successfully`),o({user:t?.username||"Unknown",action:"Deleted",entity:"Operator",entityId:s,entityName:a,details:"Deleted operator"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900",children:"Operator Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage operators who can perform maintenance tasks"})]}),e.jsxs(w,{onClick:()=>u(),className:"gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),"Add Operator"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsxs(de,{children:[e.jsx(le,{children:e.jsxs(P,{children:[e.jsx(y,{children:"Name"}),e.jsx(y,{children:"Lithoman"}),e.jsx(y,{children:"C80"}),e.jsx(y,{children:"C818"}),e.jsx(y,{children:"Status"}),e.jsx(y,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:r.length===0?e.jsx(P,{children:e.jsx(k,{colSpan:6,className:"text-center py-12 text-gray-500",children:"No operators found. Add your first operator to get started."})}):r.map(s=>e.jsxs(P,{children:[e.jsx(k,{children:s.name}),e.jsx(k,{children:e.jsx("div",{className:"flex justify-center",children:s.presses.includes("Lithoman")?e.jsx(A,{variant:"default",className:"bg-green-500",children:"✓"}):e.jsx("span",{className:"text-gray-300",children:"—"})})}),e.jsx(k,{children:e.jsx("div",{className:"flex justify-center",children:s.presses.includes("C80")?e.jsx(A,{variant:"default",className:"bg-green-500",children:"✓"}):e.jsx("span",{className:"text-gray-300",children:"—"})})}),e.jsx(k,{children:e.jsx("div",{className:"flex justify-center",children:s.presses.includes("C818")?e.jsx(A,{variant:"default",className:"bg-green-500",children:"✓"}):e.jsx("span",{className:"text-gray-300",children:"—"})})}),e.jsx(k,{children:s.active?e.jsx(A,{variant:"default",children:"Active"}):e.jsx(A,{variant:"secondary",children:"Inactive"})}),e.jsx(k,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>u(s),children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsxs(pe,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",children:e.jsx(se,{className:"w-4 h-4 text-red-500"})})}),e.jsxs(me,{children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Delete Operator"}),e.jsxs(je,{children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']})]}),e.jsxs(be,{children:[e.jsx(ve,{children:"Cancel"}),e.jsx(Ce,{onClick:()=>C(s.id,s.name),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})})]},s.id))})]})}),e.jsx(te,{open:f||!!i,onOpenChange:g,children:e.jsxs(ae,{className:"max-w-md",children:[e.jsxs(re,{children:[e.jsx(ne,{children:i?"Edit Operator":"Add New Operator"}),e.jsx(ie,{children:i?"Update the operator details below.":"Fill in the details for the new operator."})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(E,{htmlFor:"name",children:"Name *"}),e.jsx(ce,{id:"name",placeholder:"e.g., John Smith",value:n.name,onChange:s=>c({...n,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(E,{children:"Available Presses *"}),e.jsx("div",{className:"space-y-2",children:Se.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{id:s,checked:n.presses.includes(s),onCheckedChange:()=>j(s)}),e.jsx("label",{htmlFor:s,className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(E,{htmlFor:"active",children:"Active Status"}),e.jsx("p",{className:"text-gray-500",children:"Inactive operators won't appear in assignment lists"})]}),e.jsx(ke,{id:"active",checked:n.active,onCheckedChange:s=>c({...n,active:s})})]})]}),e.jsxs(oe,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:g,children:"Cancel"}),e.jsx(w,{type:"submit",children:i?"Update Operator":"Add Operator"})]})]})]})})]})}export{Be as OperatorManagement};
