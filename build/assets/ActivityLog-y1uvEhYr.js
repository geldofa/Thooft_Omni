import{c as D,u as P,r as o,j as e,L as m,X as B,S as p,k as g,l as N,m as b,n as a,B as $,C as U}from"./index-BAKIICto.js";import{T as R,a as H,b as S,c,d as I,e as l}from"./table-BL6Jb_kA.js";import{B as n}from"./badge-TVF9n0Wa.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],q=D("search",M);function z(){const{activityLogs:x}=P(),[r,C]=o.useState(""),[i,f]=o.useState("all"),[d,w]=o.useState("all"),[h,A]=o.useState("all"),L=s=>{const t=new Date(s),u=t.getFullYear(),y=String(t.getMonth()+1).padStart(2,"0"),v=String(t.getDate()).padStart(2,"0"),V=String(t.getHours()).padStart(2,"0"),E=String(t.getMinutes()).padStart(2,"0"),F=String(t.getSeconds()).padStart(2,"0");return`${u}/${y}/${v} ${V}:${E}:${F}`},k=s=>{switch(s){case"Created":return e.jsx(n,{className:"bg-green-500",children:"Created"});case"Updated":return e.jsx(n,{className:"bg-blue-500",children:"Updated"});case"Deleted":return e.jsx(n,{className:"bg-red-500",children:"Deleted"});default:return e.jsx(n,{variant:"secondary",children:s})}},j=o.useMemo(()=>x.filter(s=>{const t=r===""||s.user.toLowerCase().includes(r.toLowerCase())||s.entityName.toLowerCase().includes(r.toLowerCase())||s.details.toLowerCase().includes(r.toLowerCase()),u=i==="all"||s.action===i,y=d==="all"||s.press===d,v=h==="all"||s.entity===h;return t&&u&&y&&v}),[x,r,i,d,h]),T=()=>{C(""),f("all"),w("all"),A("all")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900",children:"Activity Log"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track all changes and activities in the system"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{htmlFor:"search",className:"mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(B,{id:"search",placeholder:"Search by user, task, or details...",value:r,onChange:s=>C(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterAction",className:"mb-2 block",children:"Action"}),e.jsxs(p,{value:i,onValueChange:f,children:[e.jsx(g,{id:"filterAction",children:e.jsx(N,{})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All Actions"}),e.jsx(a,{value:"Created",children:"Created"}),e.jsx(a,{value:"Updated",children:"Updated"}),e.jsx(a,{value:"Deleted",children:"Deleted"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterPress",className:"mb-2 block",children:"Press"}),e.jsxs(p,{value:d,onValueChange:w,children:[e.jsx(g,{id:"filterPress",children:e.jsx(N,{})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All Presses"}),e.jsx(a,{value:"Lithoman",children:"Lithoman"}),e.jsx(a,{value:"C80",children:"C80"}),e.jsx(a,{value:"C818",children:"C818"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"filterEntity",className:"mb-2 block",children:"Entity"}),e.jsxs(p,{value:h,onValueChange:A,children:[e.jsx(g,{id:"filterEntity",children:e.jsx(N,{})}),e.jsxs(b,{children:[e.jsx(a,{value:"all",children:"All Entities"}),e.jsx(a,{value:"Task",children:"Task"}),e.jsx(a,{value:"Operator",children:"Operator"}),e.jsx(a,{value:"Role",children:"Role"})]})]})]})]}),(r||i!=="all"||d!=="all"||h!=="all")&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-600",children:["Showing ",j.length," of ",x.length," activities"]}),e.jsx($,{variant:"outline",size:"sm",onClick:T,children:"Clear Filters"})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(S,{children:[e.jsx(c,{className:"w-[180px]",children:"Timestamp"}),e.jsx(c,{children:"User"}),e.jsx(c,{children:"Action"}),e.jsx(c,{children:"Entity"}),e.jsx(c,{children:"Name"}),e.jsx(c,{children:"Press"}),e.jsx(c,{children:"Details"})]})}),e.jsx(I,{children:j.length===0?e.jsx(S,{children:e.jsx(l,{colSpan:7,className:"text-center py-8 text-gray-500",children:x.length===0?"No activity logs yet. Start making changes to see them here.":"No logs match your filters."})}):j.map(s=>e.jsxs(S,{children:[e.jsx(l,{className:"text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),L(s.timestamp)]})}),e.jsx(l,{children:s.user}),e.jsx(l,{children:k(s.action)}),e.jsx(l,{children:e.jsx(n,{variant:"outline",children:s.entity})}),e.jsx(l,{children:s.entityName}),e.jsx(l,{children:s.press&&e.jsx(n,{variant:"secondary",children:s.press})}),e.jsxs(l,{className:"max-w-md",children:[e.jsx("div",{className:"text-gray-600",children:s.details}),(s.oldValue||s.newValue)&&e.jsxs("div",{className:"text-gray-500 mt-1",children:[s.oldValue&&e.jsx("span",{className:"line-through",children:s.oldValue}),s.oldValue&&s.newValue&&e.jsx("span",{className:"mx-2",children:"â†’"}),s.newValue&&e.jsx("span",{className:"text-gray-700",children:s.newValue})]})]})]},s.id))})]})})]})}export{z as ActivityLog};
