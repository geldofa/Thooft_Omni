import{c as Ve,j as e,r as u,X as Or,ac as Xe,ad as Sr,W as Pr,ae as Dr,V as Ze,af as Rr,Y as Er,Z as ee,ag as er,ah as Gr,ai as Mr,aj as Lr,ak as Ar,al as Ir,a as Vr,D as rr,b as tr,d as sr,e as ar,f as nr,L as C,P as Br,g as Jr,B as F,C as Hr,h as Kr,i as Wr,I as y,k as lr,t as Oe,A as zr,E as $r,F as Se,H as Pe,am as ge,an as fe,ao as be,ap as je,T as De,M as ze,N as $e,O as Ue,Q as qe,R as q,J as Ur,aq as Ye}from"./index-Ce9J8Ifw.js";import{T as Re,a as Ee,b as z,c as g,d as Ge,e as p}from"./table-CC1WQ1Aw.js";import{B as Me}from"./badge-DHaTBvpi.js";import{C as ce}from"./checkbox-CLtK0-RJ.js";import{P as Ne,S as Qe}from"./square-pen-BLE_I9Hi.js";import{S as qr}from"./search-D34rGJku.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Qr=Ve("arrow-down",Yr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Zr=Ve("arrow-up",Xr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],rt=Ve("calculator",et),E=(s,a=0)=>{if(s==null||s==="")return"";const n=typeof s=="string"?parseFloat(s):s;return isNaN(n)?"":n.toLocaleString("nl-NL",{minimumFractionDigits:a,maximumFractionDigits:a,useGrouping:!0})};var tt=Symbol("radix.slottable");function st(s){const a=({children:n})=>e.jsx(e.Fragment,{children:n});return a.displayName=`${s}.Slottable`,a.__radixId=tt,a}var[ve]=Or("Tooltip",[Xe]),ye=Xe(),cr="TooltipProvider",at=700,Ae="tooltip.open",[nt,Be]=ve(cr),or=s=>{const{__scopeTooltip:a,delayDuration:n=at,skipDelayDuration:o=300,disableHoverableContent:m=!1,children:c}=s,x=u.useRef(!0),O=u.useRef(!1),b=u.useRef(0);return u.useEffect(()=>{const d=b.current;return()=>window.clearTimeout(d)},[]),e.jsx(nt,{scope:a,isOpenDelayedRef:x,delayDuration:n,onOpen:u.useCallback(()=>{window.clearTimeout(b.current),x.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>x.current=!0,o)},[o]),isPointerInTransitRef:O,onPointerInTransitChange:u.useCallback(d=>{O.current=d},[]),disableHoverableContent:m,children:c})};or.displayName=cr;var oe="Tooltip",[lt,ie]=ve(oe),ir=s=>{const{__scopeTooltip:a,children:n,open:o,defaultOpen:m,onOpenChange:c,disableHoverableContent:x,delayDuration:O}=s,b=Be(oe,s.__scopeTooltip),d=ye(a),[v,S]=u.useState(null),P=Sr(),D=u.useRef(0),L=x??b.disableHoverableContent,k=O??b.delayDuration,M=u.useRef(!1),[i,G]=Pr({prop:o,defaultProp:m??!1,onChange:Q=>{Q?(b.onOpen(),document.dispatchEvent(new CustomEvent(Ae))):b.onClose(),c?.(Q)},caller:oe}),Y=u.useMemo(()=>i?M.current?"delayed-open":"instant-open":"closed",[i]),H=u.useCallback(()=>{window.clearTimeout(D.current),D.current=0,M.current=!1,G(!0)},[G]),K=u.useCallback(()=>{window.clearTimeout(D.current),D.current=0,G(!1)},[G]),B=u.useCallback(()=>{window.clearTimeout(D.current),D.current=window.setTimeout(()=>{M.current=!0,G(!0),D.current=0},k)},[k,G]);return u.useEffect(()=>()=>{D.current&&(window.clearTimeout(D.current),D.current=0)},[]),e.jsx(Dr,{...d,children:e.jsx(lt,{scope:a,contentId:P,open:i,stateAttribute:Y,trigger:v,onTriggerChange:S,onTriggerEnter:u.useCallback(()=>{b.isOpenDelayedRef.current?B():H()},[b.isOpenDelayedRef,B,H]),onTriggerLeave:u.useCallback(()=>{L?K():(window.clearTimeout(D.current),D.current=0)},[K,L]),onOpen:H,onClose:K,disableHoverableContent:L,children:n})})};ir.displayName=oe;var Ie="TooltipTrigger",dr=u.forwardRef((s,a)=>{const{__scopeTooltip:n,...o}=s,m=ie(Ie,n),c=Be(Ie,n),x=ye(n),O=u.useRef(null),b=Ze(a,O,m.onTriggerChange),d=u.useRef(!1),v=u.useRef(!1),S=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",S),[S]),e.jsx(Rr,{asChild:!0,...x,children:e.jsx(Er.button,{"aria-describedby":m.open?m.contentId:void 0,"data-state":m.stateAttribute,...o,ref:b,onPointerMove:ee(s.onPointerMove,P=>{P.pointerType!=="touch"&&!v.current&&!c.isPointerInTransitRef.current&&(m.onTriggerEnter(),v.current=!0)}),onPointerLeave:ee(s.onPointerLeave,()=>{m.onTriggerLeave(),v.current=!1}),onPointerDown:ee(s.onPointerDown,()=>{m.open&&m.onClose(),d.current=!0,document.addEventListener("pointerup",S,{once:!0})}),onFocus:ee(s.onFocus,()=>{d.current||m.onOpen()}),onBlur:ee(s.onBlur,m.onClose),onClick:ee(s.onClick,m.onClose)})})});dr.displayName=Ie;var Je="TooltipPortal",[ct,ot]=ve(Je,{forceMount:void 0}),mr=s=>{const{__scopeTooltip:a,forceMount:n,children:o,container:m}=s,c=ie(Je,a);return e.jsx(ct,{scope:a,forceMount:n,children:e.jsx(er,{present:n||c.open,children:e.jsx(Gr,{asChild:!0,container:m,children:o})})})};mr.displayName=Je;var re="TooltipContent",ur=u.forwardRef((s,a)=>{const n=ot(re,s.__scopeTooltip),{forceMount:o=n.forceMount,side:m="top",...c}=s,x=ie(re,s.__scopeTooltip);return e.jsx(er,{present:o||x.open,children:x.disableHoverableContent?e.jsx(xr,{side:m,...c,ref:a}):e.jsx(it,{side:m,...c,ref:a})})}),it=u.forwardRef((s,a)=>{const n=ie(re,s.__scopeTooltip),o=Be(re,s.__scopeTooltip),m=u.useRef(null),c=Ze(a,m),[x,O]=u.useState(null),{trigger:b,onClose:d}=n,v=m.current,{onPointerInTransitChange:S}=o,P=u.useCallback(()=>{O(null),S(!1)},[S]),D=u.useCallback((L,k)=>{const M=L.currentTarget,i={x:L.clientX,y:L.clientY},G=xt(i,M.getBoundingClientRect()),Y=ht(i,G),H=pt(k.getBoundingClientRect()),K=ft([...Y,...H]);O(K),S(!0)},[S]);return u.useEffect(()=>()=>P(),[P]),u.useEffect(()=>{if(b&&v){const L=M=>D(M,v),k=M=>D(M,b);return b.addEventListener("pointerleave",L),v.addEventListener("pointerleave",k),()=>{b.removeEventListener("pointerleave",L),v.removeEventListener("pointerleave",k)}}},[b,v,D,P]),u.useEffect(()=>{if(x){const L=k=>{const M=k.target,i={x:k.clientX,y:k.clientY},G=b?.contains(M)||v?.contains(M),Y=!gt(i,x);G?P():Y&&(P(),d())};return document.addEventListener("pointermove",L),()=>document.removeEventListener("pointermove",L)}},[b,v,x,d,P]),e.jsx(xr,{...s,ref:c})}),[dt,mt]=ve(oe,{isInside:!1}),ut=st("TooltipContent"),xr=u.forwardRef((s,a)=>{const{__scopeTooltip:n,children:o,"aria-label":m,onEscapeKeyDown:c,onPointerDownOutside:x,...O}=s,b=ie(re,n),d=ye(n),{onClose:v}=b;return u.useEffect(()=>(document.addEventListener(Ae,v),()=>document.removeEventListener(Ae,v)),[v]),u.useEffect(()=>{if(b.trigger){const S=P=>{P.target?.contains(b.trigger)&&v()};return window.addEventListener("scroll",S,{capture:!0}),()=>window.removeEventListener("scroll",S,{capture:!0})}},[b.trigger,v]),e.jsx(Lr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:x,onFocusOutside:S=>S.preventDefault(),onDismiss:v,children:e.jsxs(Ar,{"data-state":b.stateAttribute,...d,...O,ref:a,style:{...O.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(ut,{children:o}),e.jsx(dt,{scope:n,isInside:!0,children:e.jsx(Ir,{id:b.contentId,role:"tooltip",children:m||o})})]})})});ur.displayName=re;var hr="TooltipArrow",pr=u.forwardRef((s,a)=>{const{__scopeTooltip:n,...o}=s,m=ye(n);return mt(hr,n).isInside?null:e.jsx(Mr,{...m,...o,ref:a})});pr.displayName=hr;function xt(s,a){const n=Math.abs(a.top-s.y),o=Math.abs(a.bottom-s.y),m=Math.abs(a.right-s.x),c=Math.abs(a.left-s.x);switch(Math.min(n,o,m,c)){case c:return"left";case m:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function ht(s,a,n=5){const o=[];switch(a){case"top":o.push({x:s.x-n,y:s.y+n},{x:s.x+n,y:s.y+n});break;case"bottom":o.push({x:s.x-n,y:s.y-n},{x:s.x+n,y:s.y-n});break;case"left":o.push({x:s.x+n,y:s.y-n},{x:s.x+n,y:s.y+n});break;case"right":o.push({x:s.x-n,y:s.y-n},{x:s.x-n,y:s.y+n});break}return o}function pt(s){const{top:a,right:n,bottom:o,left:m}=s;return[{x:m,y:a},{x:n,y:a},{x:n,y:o},{x:m,y:o}]}function gt(s,a){const{x:n,y:o}=s;let m=!1;for(let c=0,x=a.length-1;c<a.length;x=c++){const O=a[c],b=a[x],d=O.x,v=O.y,S=b.x,P=b.y;v>o!=P>o&&n<(S-d)*(o-v)/(P-v)+d&&(m=!m)}return m}function ft(s){const a=s.slice();return a.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),bt(a)}function bt(s){if(s.length<=1)return s.slice();const a=[];for(let o=0;o<s.length;o++){const m=s[o];for(;a.length>=2;){const c=a[a.length-1],x=a[a.length-2];if((c.x-x.x)*(m.y-x.y)>=(c.y-x.y)*(m.x-x.x))a.pop();else break}a.push(m)}a.pop();const n=[];for(let o=s.length-1;o>=0;o--){const m=s[o];for(;n.length>=2;){const c=n[n.length-1],x=n[n.length-2];if((c.x-x.x)*(m.y-x.y)>=(c.y-x.y)*(m.x-x.x))n.pop();else break}n.push(m)}return n.pop(),a.length===1&&n.length===1&&a[0].x===n[0].x&&a[0].y===n[0].y?a:a.concat(n)}var jt=or,Nt=ir,vt=dr,yt=mr,_t=ur,wt=pr;function Ct({delayDuration:s=0,...a}){return e.jsx(jt,{"data-slot":"tooltip-provider",delayDuration:s,...a})}function kt({...s}){return e.jsx(Ct,{children:e.jsx(Nt,{"data-slot":"tooltip",...s})})}function Tt({...s}){return e.jsx(vt,{"data-slot":"tooltip-trigger",...s})}function Ft({className:s,sideOffset:a=0,children:n,...o}){return e.jsx(yt,{children:e.jsxs(_t,{"data-slot":"tooltip-content",sideOffset:a,className:Vr("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...o,children:[n,e.jsx(wt,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Le=({value:s,onChange:a,className:n})=>{const[o,m]=u.useState(()=>s!==""?new Intl.NumberFormat("nl-NL").format(Number(s)):""),[c,x]=u.useState(!1);u.useEffect(()=>{c||m(s!==""?new Intl.NumberFormat("nl-NL").format(Number(s)):"")},[s,c]);const O=()=>{x(!0),m(String(s))},b=()=>{x(!1)},d=v=>{const S=v.target.value.replace(/\./g,"").replace(/[^\d]/g,"");m(v.target.value);const P=parseInt(S,10);a(isNaN(P)?0:P)};return e.jsx(y,{value:o,onChange:d,onFocus:O,onBlur:b,className:n,inputMode:"numeric"})};function Ot({open:s,onOpenChange:a,onSubmit:n,editJob:o}){const m={date:new Date().toISOString().split("T")[0],datum:"",orderNr:"",orderName:"",version:"",pages:"",exOmw:"",netRun:"",startup:!1,c4_4:"",c4_0:"",c1_0:"",c1_1:"",c4_1:"",maxGross:"",green:"",red:"",delta:"",delta_number:"",delta_percentage:"",performance:""},[c,x]=u.useState(m);u.useEffect(()=>{if(s)if(o){const{id:d,...v}=o;x(v)}else x(m)},[o,s]);const O=d=>{if(d.preventDefault(),!c.orderNr.trim()||!c.orderName.trim()){Oe.error("Please fill out Order Nr and Order Name");return}n(c),a(!1),o?Oe.success("Job updated successfully"):Oe.success("Job added successfully")},b=d=>d?new Date(d).toLocaleDateString("nl-BE",{year:"numeric",month:"short",day:"numeric"}):"Pick a date";return e.jsx(rr,{open:s,onOpenChange:a,children:e.jsxs(tr,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(sr,{children:[e.jsx(ar,{children:o?"Edit Finished Job":"Add Finished Job"}),e.jsx(nr,{children:o?"Update the job details below.":"Fill in the details for the new finished job."})]}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"date",className:"text-right",children:"Date"}),e.jsxs(Br,{children:[e.jsx(Jr,{asChild:!0,children:e.jsxs(F,{variant:"outline",className:"col-span-3 justify-start text-left",children:[e.jsx(Hr,{className:"mr-2 h-4 w-4"}),b(c.date)]})}),e.jsx(Kr,{className:"w-auto p-0",align:"start",children:e.jsx(Wr,{mode:"single",selected:new Date(c.date),onSelect:d=>x({...c,date:d?.toISOString().split("T")[0]||""}),initialFocus:!0})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"orderNr",className:"text-right",children:"Order Nr."}),e.jsx(y,{id:"orderNr",value:c.orderNr,onChange:d=>x({...c,orderNr:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"orderName",className:"text-right",children:"Order"}),e.jsx(y,{id:"orderName",value:c.orderName,onChange:d=>x({...c,orderName:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"version",className:"text-right",children:"Version/Katern"}),e.jsx(y,{id:"version",value:c.version,onChange:d=>x({...c,version:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"pages",className:"text-right",children:"Pages"}),e.jsx(y,{id:"pages",type:"number",value:c.pages||"",onChange:d=>x({...c,pages:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"exOmw",className:"text-right",children:"Ex/Omw."}),e.jsx(y,{id:"exOmw",value:c.exOmw,onChange:d=>x({...c,exOmw:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"netRun",className:"text-right",children:"Oplage Netto"}),e.jsx(Le,{value:c.netRun||"",onChange:d=>x({...c,netRun:d}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"startup",className:"text-right",children:"Opstart"}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx(ce,{id:"startup",checked:c.startup,onCheckedChange:d=>x({...c,startup:!!d})})})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Wissels"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"c4_4",className:"text-right",children:"4/4"}),e.jsx(y,{id:"c4_4",type:"number",value:c.c4_4||"",onChange:d=>x({...c,c4_4:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"c4_0",className:"text-right",children:"4/0"}),e.jsx(y,{id:"c4_0",type:"number",value:c.c4_0||"",onChange:d=>x({...c,c4_0:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"c1_0",className:"text-right",children:"1/0"}),e.jsx(y,{id:"c1_0",type:"number",value:c.c1_0||"",onChange:d=>x({...c,c1_0:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"c1_1",className:"text-right",children:"1/1"}),e.jsx(y,{id:"c1_1",type:"number",value:c.c1_1||"",onChange:d=>x({...c,c1_1:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"c4_1",className:"text-right",children:"4/1"}),e.jsx(y,{id:"c4_1",type:"number",value:c.c4_1||"",onChange:d=>x({...c,c4_1:Number(d.target.value)}),className:"col-span-3"})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Resultaten"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"green",className:"text-right",children:"Groen"}),e.jsx(Le,{value:c.green||"",onChange:d=>x({...c,green:d}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(C,{htmlFor:"red",className:"text-right",children:"Rood"}),e.jsx(Le,{value:c.red||"",onChange:d=>x({...c,red:d}),className:"col-span-3"})]})]}),e.jsxs(lr,{children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(F,{type:"submit",children:o?"Update Job":"Add Job"})]})]})]})})}function Lt({presses:s}){const a=s.filter(r=>r.active&&!r.archived).map(r=>r.name),[n,o]=u.useState(!1),[m,c]=u.useState(null),x={orderNr:"",orderName:"New Werkorder",orderDate:new Date().toISOString().split("T")[0]},O={version:"New Version",pages:0,exOmw:"0",netRun:0,startup:!1,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:0,red:0,delta:0,deltaPercentage:0},[b,d]=u.useState([{id:"1",orderNr:"0001",orderName:"Spar 2025-01",orderDate:"2025-01-01",katernen:[{id:"1-1",version:"Nederlands - Katern 1",pages:40,exOmw:"2",netRun:1e5,startup:!0,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta:0,deltaPercentage:0},{id:"1-2",version:"Frans - Katern 1",pages:40,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta:0,deltaPercentage:0}]}]),v=r=>{S(O,r)},S=(r,t)=>{d(b.map(l=>{if(l.id===t){const h={...r,id:`${l.id}-${l.katernen.length+1}`};return{...l,katernen:[...l.katernen,h]}}return l}))},P={id:"new-katern-1",version:"New Version 1",pages:0,exOmw:"0",netRun:0,startup:!1,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:0,red:0,delta:0,deltaPercentage:0},D=r=>{const t=Date.now().toString(),l={...P,id:`${t}-1`},h={...r,id:t,katernen:[l]};d([h,...b])},L=r=>{const t=r.katernen.map(l=>{const h=new Date,_=Ye(h,"yyyy-MM-dd"),j=Ye(h,"dd-MM"),N={...l,orderNr:r.orderNr,orderName:r.orderName,date:_,datum:j},V=i("maxGross")?typeof f(i("maxGross").formula,N)=="number"?f(i("maxGross").formula,N):Number(String(f(i("maxGross").formula,N)).replace(/\./g,"").replace(",",".")):l.maxGross,w=Number(V)||0,R={...N,maxGross:w},T=i("green")?typeof f(i("green").formula,R)=="number"?f(i("green").formula,R):Number(String(f(i("green").formula,R)).replace(/\./g,"").replace(",",".")):l.green,J=i("red")?typeof f(i("red").formula,R)=="number"?f(i("red").formula,R):Number(String(f(i("red").formula,R)).replace(/\./g,"").replace(",",".")):l.red,W=i("delta_number")?typeof f(i("delta_number").formula,R)=="number"?f(i("delta_number").formula,R):Number(String(f(i("delta_number").formula,R)).replace(/\./g,"").replace(",",".")):l.delta,Fe=i("delta_percentage")?(()=>{const le=i("delta_percentage");return le.formula&&le.formula.trim()!=="(green + red) / maxGross"?typeof f(le.formula,R)=="number"?f(le.formula,R):Number(String(f(le.formula,R)).replace(/\./g,"").replace(",",".")):w!==0?(Number(T)+Number(J))/w*100:0})():l.deltaPercentage;return{id:Date.now().toString()+"-"+l.id,date:_,datum:j,orderNr:r.orderNr,orderName:r.orderName,version:l.version,pages:l.pages,exOmw:l.exOmw,netRun:l.netRun,startup:l.startup,c4_4:l.c4_4,c4_0:l.c4_0,c1_0:l.c1_0,c1_1:l.c1_1,c4_1:l.c4_1,maxGross:w,green:Number(T)||0,red:Number(J)||0,delta_number:Number(W)||0,delta_percentage:Number(Fe)||0,delta:Number(W)||0,performance:"100%"}});Q(l=>[...t,...l])},[k,M]=u.useState(()=>{const r={};return a.forEach(t=>{r[t]={marge:0,margePercentage:"4,2",opstart:6e3,param_4_4:4e3,param_4_0:3e3,param_1_0:1500,param_1_1:2e3,param_4_1:3500}}),r}),i=r=>Z.find(t=>t.targetColumn===r),[G,Y]=u.useState({marge:!1,margePercentage:!1,opstart:!1,param_4_4:!1,param_4_0:!1,param_1_0:!1,param_1_1:!1,param_4_1:!1}),H=(r,t,l)=>{if(G[t]){const h={...k};a.forEach(_=>{h[_]={...h[_],[t]:l}}),M(h)}else M({...k,[r]:{...k[r],[t]:l}})},K=r=>{const t=!G[r];if(Y({...G,[r]:t}),t&&a.length>0){const l=k[a[0]][r],h={...k};a.forEach(_=>{h[_]={...h[_],[r]:l}}),M(h)}},[B,Q]=u.useState([{id:"1",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Nederlands - Katern 1",pages:40,exOmw:"2",netRun:1e5,startup:!0,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"2",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Frans - Katern 1",pages:40,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"3",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Nederlands - Katern 2",pages:32,exOmw:"2",netRun:1e5,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"4",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Frans - Katern 2",pages:32,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta_number:0,delta_percentage:0,delta:0,performance:"100%"}]),[$,gr]=u.useState(null),[_e,fr]=u.useState(""),[we,br]=u.useState("all"),A=r=>{gr(t=>t?.key===r?t.direction==="asc"?{key:r,direction:"desc"}:null:{key:r,direction:"asc"})},I=r=>!$||$.key!==r?null:$.direction==="asc"?e.jsx(Zr,{className:"w-4 h-4 ml-1 text-blue-600"}):e.jsx(Qr,{className:"w-4 h-4 ml-1 text-blue-600"}),He=B.filter(r=>{if(!_e)return!0;const t=_e.toLowerCase();return we==="all"?Object.values(r).some(l=>String(l).toLowerCase().includes(t)):String(r[we]).toLowerCase().includes(t)}),jr=$?[...He].sort((r,t)=>{const l=r[$.key],h=t[$.key];return l<h?$.direction==="asc"?-1:1:l>h?$.direction==="asc"?1:-1:0}):He,Nr=r=>{const t=vr(r);Q(m?B.map(l=>l.id===m.id?{...t,id:l.id}:l):[{...t,id:Date.now().toString()},...B])},vr=r=>{const t=i("maxGross")?typeof f(i("maxGross").formula,r)=="number"?f(i("maxGross").formula,r):Number(String(f(i("maxGross").formula,r)).replace(/\./g,"").replace(",",".")):r.maxGross,l=Number(t)||0,h={...r,maxGross:l},_=i("green")?typeof f(i("green").formula,h)=="number"?f(i("green").formula,h):Number(String(f(i("green").formula,h)).replace(/\./g,"").replace(",",".")):r.green,j=i("red")?typeof f(i("red").formula,h)=="number"?f(i("red").formula,h):Number(String(f(i("red").formula,h)).replace(/\./g,"").replace(",",".")):r.red,N=i("delta_number")?typeof f(i("delta_number").formula,h)=="number"?f(i("delta_number").formula,h):Number(String(f(i("delta_number").formula,h)).replace(/\./g,"").replace(",",".")):r.delta_number||0,V=i("delta_percentage")?(()=>{const w=i("delta_percentage");return w.formula&&w.formula.trim()!=="(green + red) / maxGross"?typeof f(w.formula,h)=="number"?f(w.formula,h):Number(String(f(w.formula,h)).replace(/\./g,"").replace(",",".")):l!==0?(r.green+r.red)/l*100:0})():r.delta_percentage||0;return{...r,maxGross:l,green:Number(_)||0,red:Number(j)||0,delta_number:Number(N)||0,delta_percentage:Number(V)||0,delta:0}},yr=r=>{c(r),o(!0)},_r=r=>{Q(B.filter(t=>t.id!==r))},[Z,Ce]=u.useState([{id:"main-cost-formula",name:"Max Bruto",formula:"IF(startup, Opstart * exOmw, 0) + netRun + (netRun * Marge) + (c4_4 * exOmw * param_4_4) + (c4_0 * exOmw * param_4_0) + (c1_0 * exOmw * param_1_0) + (c1_1 * exOmw * param_1_1) + (c4_1 * exOmw * param_4_1)",targetColumn:"maxGross"},{id:"delta-number-formula",name:"Delta Number",formula:"green + red - maxGross",targetColumn:"delta_number"},{id:"delta-percentage-formula",name:"Delta Percentage",formula:"(green + red) / maxGross",targetColumn:"delta_percentage"}]),[wr,de]=u.useState(!1),[me,ke]=u.useState(null),[te,ue]=u.useState(""),[U,X]=u.useState(""),[Te,xe]=u.useState(void 0),se=[{key:"pages",label:"Pagina's"},{key:"exOmw",label:"ex/omw."},{key:"netRun",label:"Oplage netto"},{key:"startup",label:"Opstart"},{key:"c4_4",label:"4/4"},{key:"c4_0",label:"4/0"},{key:"c1_0",label:"1/0"},{key:"c1_1",label:"1/1"},{key:"c4_1",label:"4/1"},{key:"maxGross",label:"Max Bruto"},{key:"green",label:"Groen"},{key:"red",label:"Rood"},{key:"delta",label:"Delta"}],ae=[{key:"Marge",label:"Marge"},{key:"Opstart",label:"Opstart"},{key:"param_4_4",label:"4/4"},{key:"param_4_0",label:"4/0"},{key:"param_1_0",label:"1/0"},{key:"param_1_1",label:"1/1"},{key:"param_4_1",label:"4/1"}],Ke=["+","-","*","/","(",")"],he=r=>{X(t=>t+" "+r)},f=(r,t)=>{try{if(!r||!r.trim())return"";const l=(w,R,T)=>w?R:T,h=a.length>0?a[0]:"",_=h?k[h]:{};let j=r;const N=w=>w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");se.forEach(w=>{const R=new RegExp(N(w.key),"g");let T=t[w.key];w.key==="startup"&&(T=T&&_.opstart||0),j=j.replace(R,String(T))}),ae.forEach(w=>{const R=new RegExp(N(w.key),"g");let T=w.key;w.key==="Marge"&&(T="marge"),w.key==="Opstart"&&(T="opstart");let J=_[T]||0;T==="marge"&&(J=(parseFloat((_.margePercentage||"0").replace(",","."))||0)/100),j=j.replace(R,String(J))});const V=Function("IF",'"use strict"; return ('+j+")")(l);return typeof V=="number"?(Math.round(V*100)/100).toLocaleString("nl-NL",{minimumFractionDigits:0,maximumFractionDigits:2}):V}catch(l){return console.error("Formula evaluation error:",l),""}},We={pages:{bg:"#dbeafe",text:"#1e40af"},exOmw:{bg:"#cffafe",text:"#0e7490"},netRun:{bg:"#ccfbf1",text:"#0f766e"},startup:{bg:"#d1fae5",text:"#047857"},c4_4:{bg:"#e0e7ff",text:"#4338ca"},c4_0:{bg:"#ede9fe",text:"#6d28d9"},c1_0:{bg:"#f3e8ff",text:"#7c3aed"},c1_1:{bg:"#fae8ff",text:"#a21caf"},c4_1:{bg:"#fce7f3",text:"#be185d"},Marge:{bg:"#dcfce7",text:"#15803d"},Opstart:{bg:"#ecfccb",text:"#4d7c0f"},param_4_4:{bg:"#fef9c3",text:"#a16207"},param_4_0:{bg:"#fef3c7",text:"#b45309"},param_1_0:{bg:"#ffedd5",text:"#c2410c"},param_1_1:{bg:"#fee2e2",text:"#b91c1c"},param_4_1:{bg:"#ffe4e6",text:"#be123c"}},Cr=(r,t)=>{if(!r||!r.trim())return null;const l=a.length>0?a[0]:"",h=l?k[l]:{},_=[];return se.forEach(j=>{if(r.includes(j.key)){let N=t[j.key];j.key==="startup"&&(N=N&&h.opstart||0),_.push({key:j.key,label:j.label,value:N,color:We[j.key]||{bg:"#f3f4f6",text:"#374151"}})}}),ae.forEach(j=>{if(r.includes(j.key)){let N=j.key;j.key==="Marge"&&(N="marge"),j.key==="Opstart"&&(N="opstart");let V=h[N]||0;N==="marge"&&(V=(parseFloat((h.margePercentage||"0").replace(",","."))||0)/100),_.push({key:j.key,label:j.label+" (param)",value:V,color:We[j.key]||{bg:"#f3f4f6",text:"#374151"}})}}),_},pe=({formula:r,job:t,result:l})=>{const h=Cr(r,t);if(!h||h.length===0)return e.jsx("span",{children:l});const _=new Map(h.map(N=>[N.key,N])),j=()=>{const N=h.map(T=>T.key).sort((T,J)=>J.length-T.length),V=T=>T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),w=new RegExp(`(${N.map(V).join("|")})`,"g");return r.split(w).map((T,J)=>{const W=_.get(T);if(W){const Fe=typeof W.value=="number"?E(W.value):W.value;return e.jsx("span",{className:"inline-block px-1 py-0.5 rounded text-xs font-medium mx-0.5",style:{backgroundColor:W.color.bg,color:W.color.text},children:Fe},J)}return e.jsx("span",{style:{color:"#374151"},children:T},J)})};return e.jsxs(kt,{children:[e.jsx(Tt,{asChild:!0,children:e.jsx("span",{className:"cursor-help border-b border-dashed border-gray-400",children:l})}),e.jsx(Ft,{side:"top",style:{backgroundColor:"white",color:"#1f2937"},className:"border border-gray-200 shadow-lg max-w-md p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold",style:{color:"#4b5563"},children:"Formule berekening:"}),e.jsx("div",{className:"font-mono text-xs p-2 rounded border flex flex-wrap items-center",style:{backgroundColor:"#f3f4f6",borderColor:"#e5e7eb"},children:j()}),e.jsx("div",{className:"text-xs font-semibold mt-3 mb-1",style:{color:"#4b5563"},children:"Gebruikte waarden:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:h.map((N,V)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:N.color.bg,color:N.color.text},children:[e.jsxs("span",{style:{opacity:.7},children:[N.label,":"]}),e.jsx("span",{className:"font-bold",children:typeof N.value=="number"?E(N.value):N.value})]},V))}),e.jsxs("div",{className:"border-t pt-2 mt-2 flex items-center justify-between",style:{borderColor:"#e5e7eb"},children:[e.jsx("span",{className:"text-xs",style:{color:"#6b7280"},children:"Resultaat:"}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#1f2937"},children:l})]})]})})]})},ne=(r,t)=>{r?(ke(r),ue(r.name),X(r.formula),xe(r.targetColumn)):(ke(null),ue(""),X(""),xe(t)),de(!0)},kr=()=>{if(!(!te.trim()||!U.trim())){if(me)Ce(Z.map(r=>r.id===me.id?{...r,name:te,formula:U,targetColumn:Te}:r));else{const r={id:Date.now().toString(),name:te,formula:U,targetColumn:Te};Ce([...Z,r])}de(!1),ue(""),X(""),xe(void 0),ke(null)}},Tr=r=>{Ce(Z.filter(t=>t.id!==r))},Fr=B.length>0?f(U,B[0]):"N/A";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zr,{defaultValue:"werkorders",className:"w-full",children:[e.jsxs($r,{className:"flex w-full whitespace-nowrap",children:[e.jsx(Se,{value:"werkorders",children:"Werkorders"}),e.jsx(Se,{value:"finished",children:"Finished"}),e.jsx(Se,{value:"parameters",children:"Parameters"})]}),e.jsx(Pe,{value:"werkorders",children:e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(be,{children:"Werkorders"}),e.jsxs(F,{onClick:()=>D(x),children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"})," Werkorder"]})]})}),e.jsx(je,{className:"space-y-4",children:b.map(r=>e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex gap-4 w-full items-end",children:[e.jsxs("div",{className:"w-[60px]",children:[e.jsx(C,{children:"Order Nr"}),e.jsx(y,{value:`DT ${r.orderNr}`,readOnly:!0,className:"w-full px-0 py-0 border-none text-center"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(C,{children:"Order"}),e.jsx(y,{value:r.orderName,readOnly:!0,className:"w-full px-0 py-0 border-none"})]})]})}),e.jsxs(Re,{children:[e.jsx(Ee,{children:e.jsxs(z,{children:[e.jsx(g,{style:{width:"60px"},children:"Order Date"}),e.jsx(g,{children:"Versie/Katern"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"Pagina's"}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:"Ex/Omw."}),e.jsx(g,{style:{width:"100px"},children:"Oplage"}),e.jsx(g,{style:{width:"60px"},children:"Opstart"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"4/4"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"4/0"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"1/0"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"1/1"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"4/1"}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:"Max Bruto"}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:"Groen"}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:"Rood"}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:"Delta"}),e.jsx(g,{style:{width:"40px"},className:"text-center",children:"Delta %"}),e.jsx(g,{style:{width:"100px"},children:"Actions"})]})}),e.jsx(Ge,{children:r.katernen.map(t=>e.jsxs(z,{children:[e.jsx(p,{children:r.orderDate}),e.jsx(p,{children:e.jsx(y,{value:t.version})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.pages,className:"text-right"})}),e.jsx(p,{children:e.jsx(y,{value:t.exOmw,className:"w-full text-center px-0 py-0"})}),e.jsx(p,{children:e.jsx(y,{type:"number",value:t.netRun})}),e.jsx(p,{children:e.jsx(ce,{checked:t.startup})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.c4_4,className:"text-center border-none focus-visible:ring-0 focus-visible:ring-offset-0"})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.c4_0,className:"text-center border-none focus-visible:ring-0 focus-visible:ring-offset-0"})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.c1_0,className:"text-center border-none focus-visible:ring-0 focus-visible:ring-offset-0"})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.c1_1,className:"text-center border-none focus-visible:ring-0 focus-visible:ring-offset-0"})}),e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",value:t.c4_1,className:"text-center border-none focus-visible:ring-0 focus-visible:ring-offset-0"})}),e.jsx(p,{children:(()=>{const l=i("maxGross");return l?e.jsx(pe,{formula:l.formula,job:t,result:f(l.formula,t)}):E(t.maxGross)})()}),e.jsx(p,{children:e.jsx(y,{type:"number",value:t.green})}),e.jsx(p,{children:e.jsx(y,{type:"number",value:t.red})}),e.jsx(p,{children:(()=>{const l=i("delta_number");return E(l?f(l.formula,t):t.delta)})()}),e.jsx(p,{children:(()=>{const l=i("delta_percentage"),h=l?f(l.formula,t):E(t.deltaPercentage),_=typeof h=="string"?parseFloat(h.replace(/\./g,"").replace(",","."))*100:h*100,j=Math.round(_*100)/100;return j+"%"})()}),e.jsx(p,{children:e.jsx(F,{size:"sm",variant:"ghost",className:"hover:bg-red-100 text-red-500",children:e.jsx(De,{className:"w-4 h-4"})})})]},t.id))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs(F,{onClick:()=>v(r.id),size:"sm",variant:"ghost",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"})," Add Katern/Versie"]}),e.jsx(F,{onClick:()=>L(r),size:"sm",className:"w-48",children:"Order Opslaan"})]})]},r.id))})]})}),e.jsx(Pe,{value:"finished",children:e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex flex-row items-center justify-between",children:[e.jsx(be,{children:"Finished Print Jobs"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(ze,{value:we,onValueChange:br,children:[e.jsx($e,{className:"w-[130px]",children:e.jsx(Ue,{placeholder:"Filter by"})}),e.jsxs(qe,{children:[e.jsx(q,{value:"all",children:"All Fields"}),e.jsx(q,{value:"orderNr",children:"Order Nr"}),e.jsx(q,{value:"orderName",children:"Order Name"}),e.jsx(q,{value:"date",children:"Date"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(qr,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(y,{placeholder:"Search...",className:"pl-8 w-[200px]",value:_e,onChange:r=>fr(r.target.value)})]}),e.jsxs(F,{onClick:()=>{c(null),o(!0)},children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Add Finished Job"]})]})]}),e.jsx(je,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Re,{className:"table-fixed w-full",children:[e.jsxs(Ee,{children:[e.jsxs(z,{children:[e.jsx(g,{colSpan:6,className:"text-center bg-blue-100",style:{borderRight:"1px solid black"},children:"Data"}),e.jsx(g,{colSpan:6,className:"text-center bg-green-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Wissels"}),e.jsx(g,{colSpan:3,className:"text-center bg-yellow-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Berekening"}),e.jsx(g,{colSpan:2,className:"text-center bg-purple-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Prestatie"}),e.jsx(g,{className:"w-[100px]"})]}),e.jsxs(z,{children:[e.jsx(g,{onClick:()=>A("date"),style:{width:"83px"},className:"cursor-pointer hover:bg-gray-100 border-r",children:e.jsxs("div",{className:"flex items-center",children:["Date ",I("date")]})}),e.jsx(g,{onClick:()=>A("orderNr"),style:{width:"65px"},className:"cursor-pointer hover:bg-gray-100 border-r",children:e.jsxs("div",{className:"flex items-center",children:["Order nr ",I("orderNr")]})}),e.jsx(g,{onClick:()=>A("orderName"),className:"cursor-pointer hover:bg-gray-100 min-w-[150px] border-r",children:e.jsxs("div",{className:"flex items-center",children:["Order ",I("orderName")]})}),e.jsx(g,{onClick:()=>A("pages"),className:"cursor-pointer hover:bg-gray-100 text-center border-r",children:e.jsxs("div",{className:"flex items-center justify-center",children:["Blz ",I("pages")]})}),e.jsx(g,{onClick:()=>A("exOmw"),className:"cursor-pointer hover:bg-gray-100 text-center leading-3 border-r",children:e.jsxs("div",{className:"flex items-center justify-center h-full",children:["Ex/",e.jsx("br",{}),"Omw. ",I("exOmw")]})}),e.jsx(g,{onClick:()=>A("netRun"),className:"cursor-pointer hover:bg-gray-100 text-center border-r",children:e.jsxs("div",{className:"flex items-center justify-center",children:["Oplage netto ",I("netRun")]})}),e.jsx(g,{onClick:()=>A("startup"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-center",children:["Opstart ",I("startup")]})}),e.jsx(g,{onClick:()=>A("c4_4"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/4 ",I("c4_4")]})}),e.jsx(g,{onClick:()=>A("c4_0"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/0 ",I("c4_0")]})}),e.jsx(g,{onClick:()=>A("c1_0"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["1/0 ",I("c1_0")]})}),e.jsx(g,{onClick:()=>A("c1_1"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["1/1 ",I("c1_1")]})}),e.jsx(g,{onClick:()=>A("c4_1"),className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black border-r",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/1 ",I("c4_1")]})}),e.jsx(g,{style:{width:"90px"},className:"text-center border-r",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(F,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>ne(i("maxGross"),"maxGross"),title:i("maxGross")?.name||"Max Bruto",children:i("maxGross")?.name||"Max Bruto"}),e.jsx("div",{onClick:()=>A("maxGross"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:I("maxGross")})]})}),e.jsx(g,{style:{width:"90px"},className:"text-center border-r",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(F,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>ne(i("green"),"green"),title:i("green")?.name||"Groen",children:i("green")?.name||"Groen"}),e.jsx("div",{onClick:()=>A("green"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:I("green")})]})}),e.jsx(g,{style:{width:"90px",borderRight:"1px solid black"},className:"text-center",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(F,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>ne(i("red"),"red"),title:i("red")?.name||"Rood",children:i("red")?.name||"Rood"}),e.jsx("div",{onClick:()=>A("red"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:I("red")})]})}),e.jsx(g,{className:"text-center border-r",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Delta"})})}),e.jsx(g,{className:"text-center border-r",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Delta %"})})}),e.jsx(g,{style:{width:"100px"},className:"text-center",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Acties"})})})]})]}),e.jsx(Ge,{children:jr.map(r=>e.jsxs(z,{children:[e.jsx(p,{children:r.date}),e.jsxs(p,{children:["DT ",r.orderNr]}),e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:r.orderName}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-0.5",children:[e.jsx("span",{className:"w-3 h-3 border-l border-b border-gray-300 mr-1 rounded-bl-sm inline-block"}),r.version]})]})}),e.jsxs(p,{className:"w-full text-center p-0",children:[E(r.pages)," blz"]}),e.jsx(p,{className:"w-full text-center p-0",children:r.exOmw}),e.jsx(p,{className:"w-full text-center p-0 border-r",children:E(r.netRun)}),e.jsx(p,{className:"w-full text-center p-0 bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:r.startup?e.jsx(Ur,{className:"w-4 h-4 text-green-600"}):e.jsx("span",{className:"text-gray-300",children:"-"})})}),"                                                ",e.jsx(p,{className:"w-full text-center p-0 bg-gray-50",children:E(r.c4_4)}),e.jsx(p,{className:"w-full text-center p-0 bg-gray-50",children:E(r.c4_0)}),e.jsx(p,{className:"w-full text-center p-0 bg-gray-50",children:E(r.c1_0)}),e.jsx(p,{className:"w-full text-center p-0 bg-gray-50",children:E(r.c1_1)}),e.jsx(p,{className:"w-full text-center p-0 bg-gray-50 border-r",children:E(r.c4_1)}),e.jsx(p,{className:"p-0 text-center",children:(()=>{const t=i("maxGross");return t?e.jsx(pe,{formula:t.formula,job:r,result:f(t.formula,r)}):E(r.maxGross)})()}),e.jsx(p,{className:"p-0 text-center",children:(()=>{const t=i("green");return t?e.jsx(pe,{formula:t.formula,job:r,result:f(t.formula,r)}):E(r.green)})()}),e.jsx(p,{className:"p-0 text-center",style:{borderRight:"1px solid black"},children:(()=>{const t=i("red");return t?e.jsx(pe,{formula:t.formula,job:r,result:f(t.formula,r)}):E(r.red)})()}),e.jsx(p,{className:"w-full text-center p-0",children:(()=>{const t=i("delta_number");return E(t?f(t.formula,r):r.delta_number)})()}),e.jsx(p,{className:"w-full text-center p-0 border-r",children:(()=>{const t=i("delta_percentage"),l=t?f(t.formula,r):E(r.delta_percentage),h=typeof l=="string"?parseFloat(l.replace(/\./g,"").replace(",","."))*100:l*100,_=Math.round(h*100)/100;return _+"%"})()}),e.jsx(p,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{size:"sm",variant:"ghost",className:"hover:bg-blue-100 text-blue-600",onClick:()=>yr(r),children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsx(F,{size:"sm",variant:"ghost",className:"hover:bg-red-100 text-red-500",onClick:()=>_r(r.id),children:e.jsx(De,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]})}),e.jsx(Pe,{value:"parameters",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ge,{children:[e.jsx(fe,{children:e.jsx(be,{children:"Parameters"})}),e.jsxs(je,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Re,{children:[e.jsx(Ee,{children:e.jsxs(z,{children:[e.jsx(g,{className:"w-[200px]",children:"Parameter"}),e.jsx(g,{className:"w-[50px] text-center",children:"Link"}),a.map(r=>e.jsx(g,{className:"text-center min-w-[120px]",children:r},r))]})}),e.jsxs(Ge,{children:[e.jsxs(z,{children:[e.jsx(p,{className:"font-medium",children:"Marge"}),e.jsx(p,{className:"text-center",children:e.jsx(ce,{checked:G.margePercentage,onCheckedChange:()=>K("margePercentage")})}),a.map(r=>e.jsx(p,{children:e.jsx("div",{className:"flex gap-2",children:e.jsx(y,{type:"text",placeholder:"%",className:"h-8",value:k[r]?.margePercentage||"",onChange:t=>H(r,"margePercentage",t.target.value)})})},r))]}),e.jsxs(z,{children:[e.jsx(p,{className:"font-medium",children:"Opstart"}),e.jsx(p,{className:"text-center",children:e.jsx(ce,{checked:G.opstart,onCheckedChange:()=>K("opstart")})}),a.map(r=>e.jsx(p,{className:"text-center",children:e.jsx(y,{type:"number",className:"h-8",value:k[r]?.opstart||0,onChange:t=>H(r,"opstart",Number(t.target.value))})},r))]}),[{id:"param_4_4",label:"4/4"},{id:"param_4_0",label:"4/0"},{id:"param_1_0",label:"1/0"},{id:"param_1_1",label:"1/1"},{id:"param_4_1",label:"4/1"}].map(r=>e.jsxs(z,{children:[e.jsx(p,{className:"font-medium",children:r.label}),e.jsx(p,{className:"text-center",children:e.jsx(ce,{checked:G[r.id],onCheckedChange:()=>K(r.id)})}),a.map(t=>e.jsx(p,{children:e.jsx(y,{type:"number",className:"h-8",value:k[t]?.[r.id]||0,onChange:l=>H(t,r.id,Number(l.target.value))})},t))]},r.id))]})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(F,{children:"Save Changes"})})]})]}),e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex flex-row items-center justify-between",children:[e.jsx(be,{children:"Calculated Fields"}),e.jsxs(F,{onClick:()=>ne(),className:"gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Add Formula"]})]}),e.jsx(je,{children:Z.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:'No calculated fields yet. Click "Add Formula" to create one.'}):e.jsx("div",{className:"space-y-2",children:Z.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-sm text-gray-600 font-mono",children:r.formula}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Preview: ",f(r.formula,B[0])]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>ne(r),children:e.jsx(Qe,{className:"w-4 h-4"})}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Tr(r.id),children:e.jsx(De,{className:"w-4 h-4 text-red-500"})})]})]},r.id))})})]})]})})]}),e.jsx(Ot,{open:n,onOpenChange:o,onSubmit:Nr,editJob:m}),e.jsx(rr,{open:wr,onOpenChange:de,children:e.jsxs(tr,{className:"max-w-2xl",children:[e.jsxs(sr,{children:[e.jsxs(ar,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),me?"Edit Formula":"Create Calculated Field"]}),e.jsx(nr,{children:"Build a formula by clicking on fields, operators, and numbers below."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{htmlFor:"formula-name",children:"Field Name *"}),e.jsx(y,{id:"formula-name",placeholder:"e.g., Total Cost",value:te,onChange:r=>ue(r.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{children:"Target Column (Optional)"}),e.jsxs(ze,{value:Te||"none",onValueChange:r=>xe(r==="none"?void 0:r),children:[e.jsx($e,{children:e.jsx(Ue,{placeholder:"Select a column to display this formula"})}),e.jsxs(qe,{children:[e.jsx(q,{value:"none",children:"None (Reference only)"}),e.jsx(q,{value:"maxGross",children:"Max Bruto"}),e.jsx(q,{value:"delta_number",children:"Delta Number"}),e.jsx(q,{value:"delta_percentage",children:"Delta Percentage"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(C,{children:"Formula"}),e.jsx(y,{value:U,onChange:r=>X(r.target.value),placeholder:"Type or click fields below to build formula...",className:"font-mono"}),e.jsx("div",{className:"p-3 border rounded-md bg-gray-50 min-h-[60px] flex flex-wrap gap-2 items-center",children:U?U.split(" ").filter(r=>r).map((r,t)=>{const l=se.some(j=>j.key===r)||ae.some(j=>j.key===r),h=Ke.includes(r),_=!isNaN(Number(r))&&r!=="";if(l){const j=se.find(N=>N.key===r)||ae.find(N=>N.key===r);return e.jsx(Me,{variant:"outline",className:"bg-blue-50 border-blue-200",children:j?.label||r},t)}else return h?e.jsx("span",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-sm",children:r},t):_?e.jsx("span",{className:"px-2 py-1 bg-green-50 border border-green-200 rounded font-mono text-sm",children:r},t):e.jsx("span",{className:"font-mono text-sm",children:r},t)}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Formula will appear here..."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>X(""),children:"Clear"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>X(r=>r.trim().split(" ").slice(0,-1).join(" ")),children:"Remove Last"})]})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(C,{className:"text-xs text-gray-600",children:"Finished Job Fields"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:se.map(r=>e.jsx(Me,{variant:"outline",className:"cursor-pointer hover:bg-blue-100",onClick:()=>he(r.key),children:r.label},r.key))})]}),e.jsxs("div",{children:[e.jsx(C,{className:"text-xs text-gray-600",children:"Parameters"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ae.map(r=>e.jsx(Me,{variant:"outline",className:"cursor-pointer hover:bg-green-100",onClick:()=>he(r.key),children:r.label},r.key))})]}),e.jsxs("div",{children:[e.jsx(C,{className:"text-xs text-gray-600",children:"Operators"}),e.jsx("div",{className:"flex gap-2 mt-2",children:Ke.map(r=>e.jsx(F,{variant:"outline",size:"sm",onClick:()=>he(r),className:"w-10",children:r},r))})]}),e.jsxs("div",{children:[e.jsx(C,{className:"text-xs text-gray-600",children:"Number"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(y,{type:"number",placeholder:"Enter number",className:"w-32",onKeyDown:r=>{r.key==="Enter"&&(he(r.target.value),r.target.value="")}}),e.jsx("span",{className:"text-xs text-gray-500 self-center",children:"Press Enter to add"})]})]})]}),e.jsxs("div",{className:"p-3 border rounded-md bg-blue-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Preview Result"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:Fr}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Using first job data with sample parameter values"})]})]}),e.jsxs(lr,{children:[e.jsx(F,{variant:"outline",onClick:()=>de(!1),children:"Cancel"}),e.jsx(F,{onClick:kr,disabled:!te.trim()||!U.trim(),children:me?"Update Formula":"Save Formula"})]})]})})]})}export{Lt as Drukwerken};
