import{c as k,u as S,r as u,j as e,B as n,T,D as U,b as I,d as $,e as F,f as B,L as D,I as H,k as M,t as l}from"./index-DF3sGuuI.js";import{T as E,a as L,b as j,c as o,d as O,e as c}from"./table-By5_bbBg.js";import{B as g}from"./badge-mxUUkhBU.js";import{S as z}from"./switch-V3I06Ugq.js";import{A as R,a as _,b as q,c as V,d as G,e as J,f as K,g as Q,h as W}from"./alert-dialog-CjKeQ6w1.js";import{P as X,S as Y}from"./square-pen-CxmWx4NN.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],ee=k("archive",Z);function le(){const{presses:v,addPress:N,updatePress:p,deletePress:A,addActivityLog:d,user:h}=S(),[P,y]=u.useState(!1),[i,m]=u.useState(null),[a,r]=u.useState({name:"",active:!0,archived:!1}),f=s=>{s?(m(s),r({name:s.name,active:s.active,archived:s.archived})):(m(null),r({name:"",active:!0,archived:!1})),y(!0)},x=()=>{y(!1),m(null),r({name:"",active:!0,archived:!1})},w=s=>{if(s.preventDefault(),!a.name.trim()){l.error("Please enter press name");return}if(i){const t={...i,...a};p(t),l.success("Press updated successfully"),d({user:h?.username||"Unknown",action:"Updated",entity:"Press",entityId:i.id,entityName:a.name,details:`Updated press: ${a.name}`})}else N(a),l.success("Press added successfully"),d({user:h?.username||"Unknown",action:"Created",entity:"Press",entityId:Date.now().toString(),entityName:a.name,details:`Added new press: ${a.name}`});x()},b=(s,t)=>{A(s),l.success(`Press "${t}" deleted successfully`),d({user:h?.username||"Unknown",action:"Deleted",entity:"Press",entityId:s,entityName:t,details:`Deleted press: ${t}`})},C=s=>{const t={...s,archived:!s.archived};p(t),l.success(`Press "${s.name}" ${t.archived?"archived":"unarchived"}`),d({user:h?.username||"Unknown",action:"Updated",entity:"Press",entityId:s.id,entityName:s.name,details:`${t.archived?"Archived":"Unarchived"} press: ${s.name}`})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900",children:"Press Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage printing presses in the system"})]}),e.jsxs(n,{onClick:()=>f(),className:"gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Add Press"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(j,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Archived"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(O,{children:v.length===0?e.jsx(j,{children:e.jsx(c,{colSpan:4,className:"text-center py-8 text-gray-500",children:"No presses found. Add your first press to get started."})}):v.map(s=>e.jsxs(j,{children:[e.jsx(c,{children:s.name}),e.jsx(c,{children:s.active?e.jsx(g,{variant:"default",children:"Active"}):e.jsx(g,{variant:"secondary",children:"Inactive"})}),e.jsx(c,{children:s.archived?e.jsx(g,{variant:"outline",children:"Archived"}):e.jsx("span",{className:"text-gray-400",children:"â€”"})}),e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>C(s),title:s.archived?"Unarchive":"Archive",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>f(s),children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsxs(R,{children:[e.jsx(_,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(T,{className:"w-4 h-4 text-red-500"})})}),e.jsxs(q,{children:[e.jsxs(V,{children:[e.jsx(G,{children:"Delete Press"}),e.jsxs(J,{children:['Are you sure you want to delete "',s.name,'"? This will also affect all tasks associated with this press.']})]}),e.jsxs(K,{children:[e.jsx(Q,{children:"Cancel"}),e.jsx(W,{onClick:()=>b(s.id,s.name),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})})]},s.id))})]})}),e.jsx(U,{open:P,onOpenChange:x,children:e.jsxs(I,{className:"max-w-md",children:[e.jsxs($,{children:[e.jsx(F,{children:i?"Edit Press":"Add New Press"}),e.jsx(B,{children:i?"Update the press details below.":"Fill in the details for the new press."})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(D,{htmlFor:"name",children:"Press Name *"}),e.jsx(H,{id:"name",placeholder:"e.g., Heidelberg",value:a.name,onChange:s=>r({...a,name:s.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{htmlFor:"active",children:"Active Status"}),e.jsx("p",{className:"text-gray-500",children:"Inactive presses won't appear in task creation"})]}),e.jsx(z,{id:"active",checked:a.active,onCheckedChange:s=>r({...a,active:s})})]})]}),e.jsxs(M,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:x,children:"Cancel"}),e.jsx(n,{type:"submit",children:i?"Update Press":"Add Press"})]})]})]})})]})}export{le as PressManagement};
