import{u as f,r as m,j as e,B as w,ab as D,L as T,M as S,N as M,O as P,Q as R,R as g}from"./index-DwJ2JKn3.js";import{B as x}from"./badge-BDzXmqbp.js";function C({tasks:o}){const{presses:y}=f(),[c,j]=m.useState("all"),p=m.useRef(null),i=s=>{if(!s)return"N/A";const n=new Date(s),a=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${a}/${t}/${r}`},N=s=>{const n=new Date;let a=o.filter(t=>new Date(t.nextMaintenance)<n);return s&&(a=a.filter(t=>t.press===s)),a},u=s=>{const n=new Date,a=new Date(n);a.setDate(a.getDate()+7);let t=o.filter(r=>{const l=new Date(r.nextMaintenance);return l>=n&&l<=a});return s&&(t=t.filter(r=>r.press===s)),t},b=()=>{window.print()},h=y.filter(s=>s.active&&!s.archived),v=c==="all"?h.map(s=>s.name):[c];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between no-print",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-gray-900",children:"Maintenance Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and print overdue and upcoming maintenance tasks"})]}),e.jsxs(w,{onClick:b,className:"gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Print Report"]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-4 no-print",children:e.jsx("div",{className:"grid gap-4 max-w-xs",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{children:"Select Press"}),e.jsxs(S,{value:c,onValueChange:s=>j(s),children:[e.jsx(M,{children:e.jsx(P,{})}),e.jsxs(R,{children:[e.jsx(g,{value:"all",children:"All Presses"}),h.map(s=>e.jsx(g,{value:s.name,children:s.name},s.id))]})]})]})})}),e.jsxs("div",{ref:p,className:"print-content",children:[e.jsx("style",{children:`
          @media print {
            body * {
              visibility: hidden;
            }
            .print-content, .print-content * {
              visibility: visible;
            }
            .print-content {
              position: absolute;
              left: 0;
              top: 0;
              width: 100%;
            }
            .no-print {
              display: none !important;
            }
            @page {
              size: A4;
              margin: 20mm;
            }
          }
        `}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Maintenance Report"}),e.jsxs("p",{className:"text-gray-600",children:["Generated on ",i(new Date)]})]}),v.map(s=>{const n=N(s),a=u(s);return e.jsxs("div",{className:"mb-8 break-inside-avoid",children:[e.jsx("div",{className:"border-b border-gray-200 pb-2 mb-4",children:e.jsxs("h2",{className:"text-gray-900 flex items-center gap-2",children:[s,e.jsxs(x,{variant:"secondary",children:[n.length+a.length," tasks"]})]})}),n.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-red-700 mb-3 flex items-center gap-2",children:["Overdue Tasks",e.jsx(x,{className:"bg-red-500",children:n.length})]}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Task"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Due Date"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Days Overdue"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Assigned To"})]})}),e.jsx("tbody",{children:n.map(t=>{const r=new Date,l=new Date(t.nextMaintenance),d=Math.ceil((r.getTime()-l.getTime())/(1e3*60*60*24));return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{children:[e.jsx("div",{children:t.task}),t.taskSubtext&&e.jsx("div",{className:"text-gray-500",children:t.taskSubtext})]})}),e.jsx("td",{className:"py-2 text-gray-600",children:t.category}),e.jsx("td",{className:"py-2 text-gray-600",children:i(t.nextMaintenance)}),e.jsxs("td",{className:"py-2 text-red-600",children:[d," days"]}),e.jsx("td",{className:"py-2 text-gray-600",children:t.assignedTo})]},t.id)})})]})]}),a.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-orange-700 mb-3 flex items-center gap-2",children:["Due This Week",e.jsx(x,{className:"bg-orange-500",children:a.length})]}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Task"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Category"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Due Date"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Days Until Due"}),e.jsx("th",{className:"text-left py-2 text-gray-700",children:"Assigned To"})]})}),e.jsx("tbody",{children:a.map(t=>{const r=new Date,l=new Date(t.nextMaintenance),d=Math.ceil((l.getTime()-r.getTime())/(1e3*60*60*24));return e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{children:[e.jsx("div",{children:t.task}),t.taskSubtext&&e.jsx("div",{className:"text-gray-500",children:t.taskSubtext})]})}),e.jsx("td",{className:"py-2 text-gray-600",children:t.category}),e.jsx("td",{className:"py-2 text-gray-600",children:i(t.nextMaintenance)}),e.jsxs("td",{className:"py-2 text-orange-600",children:[d," days"]}),e.jsx("td",{className:"py-2 text-gray-600",children:t.assignedTo})]},t.id)})})]})]}),n.length===0&&a.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No overdue or upcoming tasks for ",s]})]},s)})]})]})]})}export{C as Reports};
