import{c as ze,j as e,r as u,X as Ar,ac as ar,ad as Gr,W as Mr,ae as Ir,V as nr,af as Lr,Y as Br,Z as se,ag as lr,ah as Vr,ai as Kr,aj as Hr,ak as Jr,al as Wr,a as $r,D as ye,b as _e,d as we,e as Ce,f as ke,L as N,P as cr,g as or,B as w,C as ir,h as dr,i as mr,I as g,k as Fe,t as H,A as zr,E as Ur,F as Ge,H as Me,am as fe,an as je,ao as Ne,ap as be,T as Ie,M as Ze,N as er,O as rr,Q as sr,R as $,J as qr}from"./index-VTjHpney.js";import{T as Le,a as Be,b as K,c as f,d as Ve,e as p}from"./table-bi68TvtM.js";import{B as Ke}from"./badge-nQ1Hrykd.js";import{C as te}from"./checkbox-DA3KPGgj.js";import{P as ve,S as tr}from"./square-pen-DjeGe6wu.js";import{S as Yr}from"./search-B8QxQXLV.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Xr=ze("arrow-down",Qr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],es=ze("arrow-up",Zr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],ss=ze("calculator",rs),R=(t,n=0)=>{if(t==null||t==="")return"";const l=typeof t=="string"?parseFloat(t):t;return isNaN(l)?"":l.toLocaleString("nl-NL",{minimumFractionDigits:n,maximumFractionDigits:n,useGrouping:!0})};var ts=Symbol("radix.slottable");function as(t){const n=({children:l})=>e.jsx(e.Fragment,{children:l});return n.displayName=`${t}.Slottable`,n.__radixId=ts,n}var[Te]=Ar("Tooltip",[ar]),Se=ar(),ur="TooltipProvider",ns=700,We="tooltip.open",[ls,Ue]=Te(ur),xr=t=>{const{__scopeTooltip:n,delayDuration:l=ns,skipDelayDuration:c=300,disableHoverableContent:m=!1,children:s}=t,o=u.useRef(!0),_=u.useRef(!1),d=u.useRef(0);return u.useEffect(()=>{const i=d.current;return()=>window.clearTimeout(i)},[]),e.jsx(ls,{scope:n,isOpenDelayedRef:o,delayDuration:l,onOpen:u.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,c)},[c]),isPointerInTransitRef:_,onPointerInTransitChange:u.useCallback(i=>{_.current=i},[]),disableHoverableContent:m,children:s})};xr.displayName=ur;var ie="Tooltip",[cs,de]=Te(ie),hr=t=>{const{__scopeTooltip:n,children:l,open:c,defaultOpen:m,onOpenChange:s,disableHoverableContent:o,delayDuration:_}=t,d=Ue(ie,t.__scopeTooltip),i=Se(n),[v,F]=u.useState(null),C=Gr(),S=u.useRef(0),E=o??d.disableHoverableContent,L=_??d.delayDuration,M=u.useRef(!1),[D,I]=Mr({prop:c,defaultProp:m??!1,onChange:Z=>{Z?(d.onOpen(),document.dispatchEvent(new CustomEvent(We))):d.onClose(),s?.(Z)},caller:ie}),j=u.useMemo(()=>D?M.current?"delayed-open":"instant-open":"closed",[D]),B=u.useCallback(()=>{window.clearTimeout(S.current),S.current=0,M.current=!1,I(!0)},[I]),z=u.useCallback(()=>{window.clearTimeout(S.current),S.current=0,I(!1)},[I]),X=u.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{M.current=!0,I(!0),S.current=0},L)},[L,I]);return u.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),e.jsx(Ir,{...i,children:e.jsx(cs,{scope:n,contentId:C,open:D,stateAttribute:j,trigger:v,onTriggerChange:F,onTriggerEnter:u.useCallback(()=>{d.isOpenDelayedRef.current?X():B()},[d.isOpenDelayedRef,X,B]),onTriggerLeave:u.useCallback(()=>{E?z():(window.clearTimeout(S.current),S.current=0)},[z,E]),onOpen:B,onClose:z,disableHoverableContent:E,children:l})})};hr.displayName=ie;var $e="TooltipTrigger",pr=u.forwardRef((t,n)=>{const{__scopeTooltip:l,...c}=t,m=de($e,l),s=Ue($e,l),o=Se(l),_=u.useRef(null),d=nr(n,_,m.onTriggerChange),i=u.useRef(!1),v=u.useRef(!1),F=u.useCallback(()=>i.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",F),[F]),e.jsx(Lr,{asChild:!0,...o,children:e.jsx(Br.button,{"aria-describedby":m.open?m.contentId:void 0,"data-state":m.stateAttribute,...c,ref:d,onPointerMove:se(t.onPointerMove,C=>{C.pointerType!=="touch"&&!v.current&&!s.isPointerInTransitRef.current&&(m.onTriggerEnter(),v.current=!0)}),onPointerLeave:se(t.onPointerLeave,()=>{m.onTriggerLeave(),v.current=!1}),onPointerDown:se(t.onPointerDown,()=>{m.open&&m.onClose(),i.current=!0,document.addEventListener("pointerup",F,{once:!0})}),onFocus:se(t.onFocus,()=>{i.current||m.onOpen()}),onBlur:se(t.onBlur,m.onClose),onClick:se(t.onClick,m.onClose)})})});pr.displayName=$e;var qe="TooltipPortal",[os,is]=Te(qe,{forceMount:void 0}),gr=t=>{const{__scopeTooltip:n,forceMount:l,children:c,container:m}=t,s=de(qe,n);return e.jsx(os,{scope:n,forceMount:l,children:e.jsx(lr,{present:l||s.open,children:e.jsx(Vr,{asChild:!0,container:m,children:c})})})};gr.displayName=qe;var ae="TooltipContent",fr=u.forwardRef((t,n)=>{const l=is(ae,t.__scopeTooltip),{forceMount:c=l.forceMount,side:m="top",...s}=t,o=de(ae,t.__scopeTooltip);return e.jsx(lr,{present:c||o.open,children:o.disableHoverableContent?e.jsx(jr,{side:m,...s,ref:n}):e.jsx(ds,{side:m,...s,ref:n})})}),ds=u.forwardRef((t,n)=>{const l=de(ae,t.__scopeTooltip),c=Ue(ae,t.__scopeTooltip),m=u.useRef(null),s=nr(n,m),[o,_]=u.useState(null),{trigger:d,onClose:i}=l,v=m.current,{onPointerInTransitChange:F}=c,C=u.useCallback(()=>{_(null),F(!1)},[F]),S=u.useCallback((E,L)=>{const M=E.currentTarget,D={x:E.clientX,y:E.clientY},I=hs(D,M.getBoundingClientRect()),j=ps(D,I),B=gs(L.getBoundingClientRect()),z=js([...j,...B]);_(z),F(!0)},[F]);return u.useEffect(()=>()=>C(),[C]),u.useEffect(()=>{if(d&&v){const E=M=>S(M,v),L=M=>S(M,d);return d.addEventListener("pointerleave",E),v.addEventListener("pointerleave",L),()=>{d.removeEventListener("pointerleave",E),v.removeEventListener("pointerleave",L)}}},[d,v,S,C]),u.useEffect(()=>{if(o){const E=L=>{const M=L.target,D={x:L.clientX,y:L.clientY},I=d?.contains(M)||v?.contains(M),j=!fs(D,o);I?C():j&&(C(),i())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[d,v,o,i,C]),e.jsx(jr,{...t,ref:s})}),[ms,us]=Te(ie,{isInside:!1}),xs=as("TooltipContent"),jr=u.forwardRef((t,n)=>{const{__scopeTooltip:l,children:c,"aria-label":m,onEscapeKeyDown:s,onPointerDownOutside:o,..._}=t,d=de(ae,l),i=Se(l),{onClose:v}=d;return u.useEffect(()=>(document.addEventListener(We,v),()=>document.removeEventListener(We,v)),[v]),u.useEffect(()=>{if(d.trigger){const F=C=>{C.target?.contains(d.trigger)&&v()};return window.addEventListener("scroll",F,{capture:!0}),()=>window.removeEventListener("scroll",F,{capture:!0})}},[d.trigger,v]),e.jsx(Hr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:F=>F.preventDefault(),onDismiss:v,children:e.jsxs(Jr,{"data-state":d.stateAttribute,...i,..._,ref:n,style:{..._.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(xs,{children:c}),e.jsx(ms,{scope:l,isInside:!0,children:e.jsx(Wr,{id:d.contentId,role:"tooltip",children:m||c})})]})})});fr.displayName=ae;var Nr="TooltipArrow",br=u.forwardRef((t,n)=>{const{__scopeTooltip:l,...c}=t,m=Se(l);return us(Nr,l).isInside?null:e.jsx(Kr,{...m,...c,ref:n})});br.displayName=Nr;function hs(t,n){const l=Math.abs(n.top-t.y),c=Math.abs(n.bottom-t.y),m=Math.abs(n.right-t.x),s=Math.abs(n.left-t.x);switch(Math.min(l,c,m,s)){case s:return"left";case m:return"right";case l:return"top";case c:return"bottom";default:throw new Error("unreachable")}}function ps(t,n,l=5){const c=[];switch(n){case"top":c.push({x:t.x-l,y:t.y+l},{x:t.x+l,y:t.y+l});break;case"bottom":c.push({x:t.x-l,y:t.y-l},{x:t.x+l,y:t.y-l});break;case"left":c.push({x:t.x+l,y:t.y-l},{x:t.x+l,y:t.y+l});break;case"right":c.push({x:t.x-l,y:t.y-l},{x:t.x-l,y:t.y+l});break}return c}function gs(t){const{top:n,right:l,bottom:c,left:m}=t;return[{x:m,y:n},{x:l,y:n},{x:l,y:c},{x:m,y:c}]}function fs(t,n){const{x:l,y:c}=t;let m=!1;for(let s=0,o=n.length-1;s<n.length;o=s++){const _=n[s],d=n[o],i=_.x,v=_.y,F=d.x,C=d.y;v>c!=C>c&&l<(F-i)*(c-v)/(C-v)+i&&(m=!m)}return m}function js(t){const n=t.slice();return n.sort((l,c)=>l.x<c.x?-1:l.x>c.x?1:l.y<c.y?-1:l.y>c.y?1:0),Ns(n)}function Ns(t){if(t.length<=1)return t.slice();const n=[];for(let c=0;c<t.length;c++){const m=t[c];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(m.y-o.y)>=(s.y-o.y)*(m.x-o.x))n.pop();else break}n.push(m)}n.pop();const l=[];for(let c=t.length-1;c>=0;c--){const m=t[c];for(;l.length>=2;){const s=l[l.length-1],o=l[l.length-2];if((s.x-o.x)*(m.y-o.y)>=(s.y-o.y)*(m.x-o.x))l.pop();else break}l.push(m)}return l.pop(),n.length===1&&l.length===1&&n[0].x===l[0].x&&n[0].y===l[0].y?n:n.concat(l)}var bs=xr,vs=hr,ys=pr,_s=gr,ws=fr,Cs=br;function ks({delayDuration:t=0,...n}){return e.jsx(bs,{"data-slot":"tooltip-provider",delayDuration:t,...n})}function Fs({...t}){return e.jsx(ks,{children:e.jsx(vs,{"data-slot":"tooltip",...t})})}function Ts({...t}){return e.jsx(ys,{"data-slot":"tooltip-trigger",...t})}function Ss({className:t,sideOffset:n=0,children:l,...c}){return e.jsx(_s,{children:e.jsxs(ws,{"data-slot":"tooltip-content",sideOffset:n,className:$r("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...c,children:[l,e.jsx(Cs,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const He=({value:t,onChange:n,className:l})=>{const[c,m]=u.useState(()=>t!==""?new Intl.NumberFormat("nl-NL").format(Number(t)):""),[s,o]=u.useState(!1);u.useEffect(()=>{s||m(t!==""?new Intl.NumberFormat("nl-NL").format(Number(t)):"")},[t,s]);const _=()=>{o(!0),m(String(t))},d=()=>{o(!1)},i=v=>{const F=v.target.value.replace(/\./g,"").replace(/[^\d]/g,"");m(v.target.value);const C=parseInt(F,10);n(isNaN(C)?0:C)};return e.jsx(g,{value:c,onChange:i,onFocus:_,onBlur:d,className:l,inputMode:"numeric"})};function Os({open:t,onOpenChange:n,onSubmit:l,editJob:c}){const m={date:new Date().toISOString().split("T")[0],datum:"",orderNr:"",orderName:"",version:"",pages:0,exOmw:"",netRun:0,startup:!1,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:0,red:0,delta:0,delta_number:0,delta_percentage:0,performance:""},[s,o]=u.useState(m);u.useEffect(()=>{t&&o(c?{...c,id:void 0}:m)},[c,t]);const _=i=>{if(i.preventDefault(),!s.orderNr.trim()||!s.orderName.trim()){H.error("Please fill out Order Nr and Order Name");return}l(s),n(!1),c?H.success("Job updated successfully"):H.success("Job added successfully")},d=i=>i?new Date(i).toLocaleDateString("nl-BE",{year:"numeric",month:"short",day:"numeric"}):"Pick a date";return e.jsx(ye,{open:t,onOpenChange:n,children:e.jsxs(_e,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(we,{children:[e.jsx(Ce,{children:c?"Edit Finished Job":"Add Finished Job"}),e.jsx(ke,{children:c?"Update the job details below.":"Fill in the details for the new finished job."})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"date",className:"text-right",children:"Date"}),e.jsxs(cr,{children:[e.jsx(or,{asChild:!0,children:e.jsxs(w,{variant:"outline",className:"col-span-3 justify-start text-left",children:[e.jsx(ir,{className:"mr-2 h-4 w-4"}),d(s.date)]})}),e.jsx(dr,{className:"w-auto p-0",align:"start",children:e.jsx(mr,{mode:"single",selected:new Date(s.date),onSelect:i=>o({...s,date:i?.toISOString().split("T")[0]||""}),initialFocus:!0})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"orderNr",className:"text-right",children:"Order Nr."}),e.jsx(g,{id:"orderNr",value:s.orderNr,onChange:i=>o({...s,orderNr:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"orderName",className:"text-right",children:"Order"}),e.jsx(g,{id:"orderName",value:s.orderName,onChange:i=>o({...s,orderName:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"version",className:"text-right",children:"Version/Katern"}),e.jsx(g,{id:"version",value:s.version,onChange:i=>o({...s,version:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"pages",className:"text-right",children:"Pages"}),e.jsx(g,{id:"pages",type:"number",value:s.pages||"",onChange:i=>o({...s,pages:Number(i.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"exOmw",className:"text-right",children:"Ex/Omw."}),e.jsx(g,{id:"exOmw",value:s.exOmw,onChange:i=>o({...s,exOmw:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"netRun",className:"text-right",children:"Oplage Netto"}),e.jsx(He,{value:s.netRun||"",onChange:i=>o({...s,netRun:i}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"startup",className:"text-right",children:"Opstart"}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx(te,{id:"startup",checked:s.startup,onCheckedChange:i=>o({...s,startup:!!i})})})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Wissels"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_4",className:"text-right",children:"4/4"}),e.jsx(g,{id:"c4_4",type:"number",value:s.c4_4||"",onChange:i=>o({...s,c4_4:Number(i.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_0",className:"text-right",children:"4/0"}),e.jsx(g,{id:"c4_0",type:"number",value:s.c4_0||"",onChange:i=>o({...s,c4_0:Number(i.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c1_0",className:"text-right",children:"1/0"}),e.jsx(g,{id:"c1_0",type:"number",value:s.c1_0||"",onChange:i=>o({...s,c1_0:Number(i.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c1_1",className:"text-right",children:"1/1"}),e.jsx(g,{id:"c1_1",type:"number",value:s.c1_1||"",onChange:i=>o({...s,c1_1:Number(i.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_1",className:"text-right",children:"4/1"}),e.jsx(g,{id:"c4_1",type:"number",value:s.c4_1||"",onChange:i=>o({...s,c4_1:Number(i.target.value)}),className:"col-span-3"})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Resultaten"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"green",className:"text-right",children:"Groen"}),e.jsx(He,{value:s.green||"",onChange:i=>o({...s,green:i}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"red",className:"text-right",children:"Rood"}),e.jsx(He,{value:s.red||"",onChange:i=>o({...s,red:i}),className:"col-span-3"})]})]}),e.jsxs(Fe,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:c?"Update Job":"Add Job"})]})]})]})})}const Je=({value:t,onChange:n,className:l})=>{const[c,m]=u.useState(()=>t!==""?new Intl.NumberFormat("nl-NL").format(Number(t)):""),[s,o]=u.useState(!1);u.useEffect(()=>{s||m(t!==""?new Intl.NumberFormat("nl-NL").format(Number(t)):"")},[t,s]);const _=()=>{o(!0),m(String(t))},d=()=>{o(!1)},i=v=>{const F=v.target.value.replace(/\./g,"").replace(/[^\d]/g,"");m(v.target.value);const C=parseInt(F,10);n(isNaN(C)?0:C)};return e.jsx(g,{value:c,onChange:i,onFocus:_,onBlur:d,className:l,inputMode:"numeric"})};function Ds({open:t,onOpenChange:n,onSubmit:l,editKatern:c}){const m={version:"",pages:0,exOmw:"",netRun:0,startup:!1,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:0,red:0,delta:0,deltaPercentage:0},[s,o]=u.useState(m);u.useEffect(()=>{t&&o(c?{...c,id:void 0}:m)},[c,t]);const _=d=>{if(d.preventDefault(),!s.version.trim()){H.error("Please fill out Version/Katern");return}l(s),n(!1),c?H.success("Katern updated successfully"):H.success("Katern added successfully")};return e.jsx(ye,{open:t,onOpenChange:n,children:e.jsxs(_e,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(we,{children:[e.jsx(Ce,{children:c?"Edit Katern":"Add Katern/Versie"}),e.jsx(ke,{children:c?"Update the katern details below.":"Fill in the details for the new katern."})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"version",className:"text-right",children:"Version/Katern"}),e.jsx(g,{id:"version",value:s.version,onChange:d=>o({...s,version:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"pages",className:"text-right",children:"Pages"}),e.jsx(g,{id:"pages",type:"number",value:s.pages||"",onChange:d=>o({...s,pages:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"exOmw",className:"text-right",children:"Ex/Omw."}),e.jsx(g,{id:"exOmw",value:s.exOmw,onChange:d=>o({...s,exOmw:d.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"netRun",className:"text-right",children:"Oplage Netto"}),e.jsx(Je,{value:s.netRun||"",onChange:d=>o({...s,netRun:d}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"startup",className:"text-right",children:"Opstart"}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx(te,{id:"startup",checked:s.startup,onCheckedChange:d=>o({...s,startup:!!d})})})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Wissels"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_4",className:"text-right",children:"4/4"}),e.jsx(g,{id:"c4_4",type:"number",value:s.c4_4||"",onChange:d=>o({...s,c4_4:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_0",className:"text-right",children:"4/0"}),e.jsx(g,{id:"c4_0",type:"number",value:s.c4_0||"",onChange:d=>o({...s,c4_0:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c1_0",className:"text-right",children:"1/0"}),e.jsx(g,{id:"c1_0",type:"number",value:s.c1_0||"",onChange:d=>o({...s,c1_0:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c1_1",className:"text-right",children:"1/1"}),e.jsx(g,{id:"c1_1",type:"number",value:s.c1_1||"",onChange:d=>o({...s,c1_1:Number(d.target.value)}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"c4_1",className:"text-right",children:"4/1"}),e.jsx(g,{id:"c4_1",type:"number",value:s.c4_1||"",onChange:d=>o({...s,c4_1:Number(d.target.value)}),className:"col-span-3"})]}),e.jsx("h3",{className:"font-semibold col-span-4 pt-4",children:"Resultaten"}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"green",className:"text-right",children:"Groen"}),e.jsx(Je,{value:s.green||"",onChange:d=>o({...s,green:d}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"red",className:"text-right",children:"Rood"}),e.jsx(Je,{value:s.red||"",onChange:d=>o({...s,red:d}),className:"col-span-3"})]})]}),e.jsxs(Fe,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:c?"Update Katern":"Add Katern"})]})]})]})})}function Ps({open:t,onOpenChange:n,onSubmit:l,editWerkorder:c}){const m={orderNr:"",orderName:"",orderDate:new Date().toISOString().split("T")[0]},[s,o]=u.useState(m);u.useEffect(()=>{t&&o(c?{...c,id:void 0,katernen:void 0}:m)},[c,t]);const _=i=>{if(i.preventDefault(),!s.orderNr.trim()||!s.orderName.trim()){H.error("Please fill out Order Nr and Order Name");return}l(s),n(!1),c?H.success("Werkorder updated successfully"):H.success("Werkorder added successfully")},d=i=>i?new Date(i).toLocaleDateString("nl-BE",{year:"numeric",month:"short",day:"numeric"}):"Pick a date";return e.jsx(ye,{open:t,onOpenChange:n,children:e.jsxs(_e,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(we,{children:[e.jsx(Ce,{children:c?"Edit Werkorder":"Add Werkorder"}),e.jsx(ke,{children:c?"Update the werkorder details below.":"Fill in the details for the new werkorder."})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"orderNr",className:"text-right",children:"Order Nr."}),e.jsx(g,{id:"orderNr",value:s.orderNr,onChange:i=>o({...s,orderNr:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"orderName",className:"text-right",children:"Order Name"}),e.jsx(g,{id:"orderName",value:s.orderName,onChange:i=>o({...s,orderName:i.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"orderDate",className:"text-right",children:"Order Date"}),e.jsxs(cr,{children:[e.jsx(or,{asChild:!0,children:e.jsxs(w,{variant:"outline",className:"col-span-3 justify-start text-left",children:[e.jsx(ir,{className:"mr-2 h-4 w-4"}),d(s.orderDate)]})}),e.jsx(dr,{className:"w-auto p-0",align:"start",children:e.jsx(mr,{mode:"single",selected:new Date(s.orderDate),onSelect:i=>o({...s,orderDate:i?.toISOString().split("T")[0]||""}),initialFocus:!0})})]})]})]}),e.jsxs(Fe,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:c?"Update Werkorder":"Add Werkorder"})]})]})]})})}function Ls({presses:t}){const n=t.filter(r=>r.active&&!r.archived).map(r=>r.name),[l,c]=u.useState(!1),[m,s]=u.useState(null),[o,_]=u.useState(!1),[d,i]=u.useState(null),[v,F]=u.useState(!1),[C,S]=u.useState([{id:"1",orderNr:"0001",orderName:"Spar 2025-01",orderDate:"2025-01-01",katernen:[{id:"1-1",version:"Nederlands - Katern 1",pages:40,exOmw:"2",netRun:1e5,startup:!0,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta:0,deltaPercentage:0},{id:"1-2",version:"Frans - Katern 1",pages:40,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta:0,deltaPercentage:0}]}]),E=r=>{i(r),_(!0)},L=r=>{d&&S(C.map(a=>{if(a.id===d){const x={...r,id:`${a.id}-${a.katernen.length+1}`};return{...a,katernen:[...a.katernen,x]}}return a}))},M=r=>{const a={...r,id:Date.now().toString(),katernen:[]};S([a,...C])},[D,I]=u.useState(()=>{const r={};return n.forEach(a=>{r[a]={marge:0,margePercentage:"4,2",opstart:6e3,param_4_4:4e3,param_4_0:3e3,param_1_0:1500,param_1_1:2e3,param_4_1:3500}}),r}),j=r=>ee.find(a=>a.targetColumn===r),[B,z]=u.useState({marge:!1,margePercentage:!1,opstart:!1,param_4_4:!1,param_4_0:!1,param_1_0:!1,param_1_1:!1,param_4_1:!1}),X=(r,a,x)=>{if(B[a]){const h={...D};n.forEach(T=>{h[T]={...h[T],[a]:x}}),I(h)}else I({...D,[r]:{...D[r],[a]:x}})},Z=r=>{const a=!B[r];if(z({...B,[r]:a}),a&&n.length>0){const x=D[n[0]][r],h={...D};n.forEach(T=>{h[T]={...h[T],[r]:x}}),I(h)}},[U,Oe]=u.useState([{id:"1",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Nederlands - Katern 1",pages:40,exOmw:"2",netRun:1e5,startup:!0,c4_4:0,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"2",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Frans - Katern 1",pages:40,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"3",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Nederlands - Katern 2",pages:32,exOmw:"2",netRun:1e5,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:101e3,red:3e3,delta_number:0,delta_percentage:0,delta:0,performance:"100%"},{id:"4",date:"2025-01-01",datum:"01-01",orderNr:"0001",orderName:"Spar 2025-01",version:"Frans - Katern 2",pages:32,exOmw:"2",netRun:5e4,startup:!1,c4_4:1,c4_0:0,c1_0:0,c1_1:0,c4_1:0,maxGross:0,green:50500,red:1500,delta_number:0,delta_percentage:0,delta:0,performance:"100%"}]),[J,vr]=u.useState(null),[De,yr]=u.useState(""),[Pe,_r]=u.useState("all"),A=r=>{vr(a=>a?.key===r?a.direction==="asc"?{key:r,direction:"desc"}:null:{key:r,direction:"asc"})},G=r=>!J||J.key!==r?null:J.direction==="asc"?e.jsx(es,{className:"w-4 h-4 ml-1 text-blue-600"}):e.jsx(Xr,{className:"w-4 h-4 ml-1 text-blue-600"}),Ye=U.filter(r=>{if(!De)return!0;const a=De.toLowerCase();return Pe==="all"?Object.values(r).some(x=>String(x).toLowerCase().includes(a)):String(r[Pe]).toLowerCase().includes(a)}),wr=J?[...Ye].sort((r,a)=>{const x=r[J.key],h=a[J.key];return x<h?J.direction==="asc"?-1:1:x>h?J.direction==="asc"?1:-1:0}):Ye,Cr=r=>{const a=kr(r);Oe(m?U.map(x=>x.id===m.id?{...a,id:x.id}:x):[{...a,id:Date.now().toString()},...U])},kr=r=>{const a=j("maxGross")?typeof k(j("maxGross").formula,r)=="number"?k(j("maxGross").formula,r):Number(String(k(j("maxGross").formula,r)).replace(/\./g,"").replace(",",".")):r.maxGross,x=Number(a)||0,h={...r,maxGross:x},T=j("green")?typeof k(j("green").formula,h)=="number"?k(j("green").formula,h):Number(String(k(j("green").formula,h)).replace(/\./g,"").replace(",",".")):r.green,b=j("red")?typeof k(j("red").formula,h)=="number"?k(j("red").formula,h):Number(String(k(j("red").formula,h)).replace(/\./g,"").replace(",",".")):r.red,y=j("delta_number")?typeof k(j("delta_number").formula,h)=="number"?k(j("delta_number").formula,h):Number(String(k(j("delta_number").formula,h)).replace(/\./g,"").replace(",",".")):r.delta_number||0,V=j("delta_percentage")?(()=>{const O=j("delta_percentage");return O.formula&&O.formula.trim()!=="(green + red) / maxGross"?typeof k(O.formula,h)=="number"?k(O.formula,h):Number(String(k(O.formula,h)).replace(/\./g,"").replace(",",".")):x!==0?(r.green+r.red)/x*100:0})():r.delta_percentage||0;return{...r,maxGross:x,green:Number(T)||0,red:Number(b)||0,delta_number:Number(y)||0,delta_percentage:Number(V)||0,delta:0}},Fr=r=>{s(r),c(!0)},Tr=r=>{Oe(U.filter(a=>a.id!==r))},[ee,Re]=u.useState([{id:"main-cost-formula",name:"Max Bruto",formula:"IF(startup, Opstart * exOmw, 0) + netRun + (netRun * Marge) + (c4_4 * exOmw * param_4_4) + (c4_0 * exOmw * param_4_0) + (c1_0 * exOmw * param_1_0) + (c1_1 * exOmw * param_1_1) + (c4_1 * exOmw * param_4_1)",targetColumn:"maxGross"},{id:"delta-number-formula",name:"Delta Number",formula:"green + red - maxGross",targetColumn:"delta_number"},{id:"delta-percentage-formula",name:"Delta Percentage",formula:"(green + red) / maxGross",targetColumn:"delta_percentage"}]),[Sr,me]=u.useState(!1),[ue,Ee]=u.useState(null),[ne,xe]=u.useState(""),[W,q]=u.useState(""),[Ae,he]=u.useState(void 0),le=[{key:"pages",label:"Pagina's"},{key:"exOmw",label:"ex/omw."},{key:"netRun",label:"Oplage netto"},{key:"startup",label:"Opstart"},{key:"c4_4",label:"4/4"},{key:"c4_0",label:"4/0"},{key:"c1_0",label:"1/0"},{key:"c1_1",label:"1/1"},{key:"c4_1",label:"4/1"},{key:"maxGross",label:"Max Bruto"},{key:"green",label:"Groen"},{key:"red",label:"Rood"},{key:"delta",label:"Delta"}],ce=[{key:"Marge",label:"Marge"},{key:"Opstart",label:"Opstart"},{key:"param_4_4",label:"4/4"},{key:"param_4_0",label:"4/0"},{key:"param_1_0",label:"1/0"},{key:"param_1_1",label:"1/1"},{key:"param_4_1",label:"4/1"}],Qe=["+","-","*","/","(",")"],pe=r=>{q(a=>a+" "+r)},k=(r,a)=>{try{if(!r||!r.trim())return"";const x=(O,Y,P)=>O?Y:P,h=n.length>0?n[0]:"",T=h?D[h]:{};let b=r;const y=O=>O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");le.forEach(O=>{const Y=new RegExp(y(O.key),"g");let P=a[O.key];O.key==="startup"&&(P=P&&T.opstart||0),b=b.replace(Y,String(P))}),ce.forEach(O=>{const Y=new RegExp(y(O.key),"g");let P=O.key;O.key==="Marge"&&(P="marge"),O.key==="Opstart"&&(P="opstart");let Q=T[P]||0;P==="marge"&&(Q=(parseFloat((T.margePercentage||"0").replace(",","."))||0)/100),b=b.replace(Y,String(Q))});const V=Function("IF",'"use strict"; return ('+b+")")(x);return typeof V=="number"?(Math.round(V*100)/100).toLocaleString("nl-NL",{minimumFractionDigits:0,maximumFractionDigits:2}):V}catch(x){return console.error("Formula evaluation error:",x),""}},Xe={pages:{bg:"#dbeafe",text:"#1e40af"},exOmw:{bg:"#cffafe",text:"#0e7490"},netRun:{bg:"#ccfbf1",text:"#0f766e"},startup:{bg:"#d1fae5",text:"#047857"},c4_4:{bg:"#e0e7ff",text:"#4338ca"},c4_0:{bg:"#ede9fe",text:"#6d28d9"},c1_0:{bg:"#f3e8ff",text:"#7c3aed"},c1_1:{bg:"#fae8ff",text:"#a21caf"},c4_1:{bg:"#fce7f3",text:"#be185d"},Marge:{bg:"#dcfce7",text:"#15803d"},Opstart:{bg:"#ecfccb",text:"#4d7c0f"},param_4_4:{bg:"#fef9c3",text:"#a16207"},param_4_0:{bg:"#fef3c7",text:"#b45309"},param_1_0:{bg:"#ffedd5",text:"#c2410c"},param_1_1:{bg:"#fee2e2",text:"#b91c1c"},param_4_1:{bg:"#ffe4e6",text:"#be123c"}},Or=(r,a)=>{if(!r||!r.trim())return null;const x=n.length>0?n[0]:"",h=x?D[x]:{},T=[];return le.forEach(b=>{if(r.includes(b.key)){let y=a[b.key];b.key==="startup"&&(y=y&&h.opstart||0),T.push({key:b.key,label:b.label,value:y,color:Xe[b.key]||{bg:"#f3f4f6",text:"#374151"}})}}),ce.forEach(b=>{if(r.includes(b.key)){let y=b.key;b.key==="Marge"&&(y="marge"),b.key==="Opstart"&&(y="opstart");let V=h[y]||0;y==="marge"&&(V=(parseFloat((h.margePercentage||"0").replace(",","."))||0)/100),T.push({key:b.key,label:b.label+" (param)",value:V,color:Xe[b.key]||{bg:"#f3f4f6",text:"#374151"}})}}),T},ge=({formula:r,job:a,result:x})=>{const h=Or(r,a);if(!h||h.length===0)return e.jsx("span",{children:x});const T=new Map(h.map(y=>[y.key,y])),b=()=>{const y=h.map(P=>P.key).sort((P,Q)=>Q.length-P.length),V=P=>P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),O=new RegExp(`(${y.map(V).join("|")})`,"g");return r.split(O).map((P,Q)=>{const re=T.get(P);if(re){const Er=typeof re.value=="number"?R(re.value):re.value;return e.jsx("span",{className:"inline-block px-1 py-0.5 rounded text-xs font-medium mx-0.5",style:{backgroundColor:re.color.bg,color:re.color.text},children:Er},Q)}return e.jsx("span",{style:{color:"#374151"},children:P},Q)})};return e.jsxs(Fs,{children:[e.jsx(Ts,{asChild:!0,children:e.jsx("span",{className:"cursor-help border-b border-dashed border-gray-400",children:x})}),e.jsx(Ss,{side:"top",style:{backgroundColor:"white",color:"#1f2937"},className:"border border-gray-200 shadow-lg max-w-md p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold",style:{color:"#4b5563"},children:"Formule berekening:"}),e.jsx("div",{className:"font-mono text-xs p-2 rounded border flex flex-wrap items-center",style:{backgroundColor:"#f3f4f6",borderColor:"#e5e7eb"},children:b()}),e.jsx("div",{className:"text-xs font-semibold mt-3 mb-1",style:{color:"#4b5563"},children:"Gebruikte waarden:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:h.map((y,V)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:y.color.bg,color:y.color.text},children:[e.jsxs("span",{style:{opacity:.7},children:[y.label,":"]}),e.jsx("span",{className:"font-bold",children:typeof y.value=="number"?R(y.value):y.value})]},V))}),e.jsxs("div",{className:"border-t pt-2 mt-2 flex items-center justify-between",style:{borderColor:"#e5e7eb"},children:[e.jsx("span",{className:"text-xs",style:{color:"#6b7280"},children:"Resultaat:"}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#1f2937"},children:x})]})]})})]})},oe=(r,a)=>{r?(Ee(r),xe(r.name),q(r.formula),he(r.targetColumn)):(Ee(null),xe(""),q(""),he(a)),me(!0)},Dr=()=>{if(!(!ne.trim()||!W.trim())){if(ue)Re(ee.map(r=>r.id===ue.id?{...r,name:ne,formula:W,targetColumn:Ae}:r));else{const r={id:Date.now().toString(),name:ne,formula:W,targetColumn:Ae};Re([...ee,r])}me(!1),xe(""),q(""),he(void 0),Ee(null)}},Pr=r=>{Re(ee.filter(a=>a.id!==r))},Rr=U.length>0?k(W,U[0]):"N/A";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zr,{defaultValue:"werkorders",className:"w-full",children:[e.jsxs(Ur,{className:"flex w-full whitespace-nowrap",children:[e.jsx(Ge,{value:"werkorders",children:"Werkorders"}),e.jsx(Ge,{value:"finished",children:"Finished"}),e.jsx(Ge,{value:"parameters",children:"Parameters"})]}),e.jsx(Me,{value:"werkorders",children:e.jsxs(fe,{children:[e.jsx(je,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Ne,{children:"Werkorders"}),e.jsxs(w,{onClick:()=>F(!0),children:[e.jsx(ve,{className:"w-4 h-4 mr-2"})," Werkorder"]})]})}),e.jsx(be,{className:"space-y-4",children:C.map(r=>e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Order Nr"}),e.jsx(g,{value:r.orderNr,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Order"}),e.jsx(g,{value:r.orderName,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Order Date"}),e.jsx(g,{value:r.orderDate,readOnly:!0})]})]}),"                                        ",e.jsxs(w,{onClick:()=>E(r.id),children:[e.jsx(ve,{className:"w-4 h-4 mr-2"})," Katern/Versie"]})]}),e.jsxs(Le,{children:[e.jsx(Be,{children:e.jsxs(K,{children:[e.jsx(f,{children:"Versie/Katern"}),e.jsx(f,{children:"Pages"}),e.jsx(f,{children:"ex/omw"}),e.jsx(f,{children:"Oplage"}),e.jsx(f,{children:"Opstart"}),e.jsx(f,{children:"4/4"}),e.jsx(f,{children:"4/0"}),e.jsx(f,{children:"1/0"}),e.jsx(f,{children:"1/1"}),e.jsx(f,{children:"4/1"}),e.jsx(f,{children:"Max Bruto"}),e.jsx(f,{children:"Groen"}),e.jsx(f,{children:"Rood"}),e.jsx(f,{children:"Delta"}),e.jsx(f,{children:"Delta %"}),e.jsx(f,{children:"Actions"})]})}),e.jsx(Ve,{children:r.katernen.map(a=>e.jsxs(K,{children:[e.jsx(p,{children:e.jsx(g,{value:a.version})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.pages})}),e.jsx(p,{children:e.jsx(g,{value:a.exOmw})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.netRun})}),e.jsx(p,{children:e.jsx(te,{checked:a.startup})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.c4_4})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.c4_0})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.c1_0})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.c1_1})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.c4_1})}),e.jsx(p,{children:(()=>{const x=j("maxGross");return x?e.jsx(ge,{formula:x.formula,job:a,result:k(x.formula,a)}):R(a.maxGross)})()}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.green})}),e.jsx(p,{children:e.jsx(g,{type:"number",value:a.red})}),e.jsx(p,{children:(()=>{const x=j("delta_number");return R(x?k(x.formula,a):a.delta)})()}),e.jsx(p,{children:(()=>{const x=j("delta_percentage"),h=x?k(x.formula,a):R(a.deltaPercentage),T=typeof h=="string"?parseFloat(h.replace(/\./g,"").replace(",","."))*100:h*100,b=Math.round(T*100)/100;return b+"%"})()}),e.jsx(p,{children:e.jsx(w,{size:"sm",variant:"ghost",className:"hover:bg-red-100 text-red-500",children:e.jsx(Ie,{className:"w-4 h-4"})})})]},a.id))})]})]},r.id))})]})}),e.jsx(Me,{value:"finished",children:e.jsxs(fe,{children:[e.jsxs(je,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ne,{children:"Finished Print Jobs"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(Ze,{value:Pe,onValueChange:_r,children:[e.jsx(er,{className:"w-[130px]",children:e.jsx(rr,{placeholder:"Filter by"})}),e.jsxs(sr,{children:[e.jsx($,{value:"all",children:"All Fields"}),e.jsx($,{value:"orderNr",children:"Order Nr"}),e.jsx($,{value:"orderName",children:"Order Name"}),e.jsx($,{value:"date",children:"Date"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(g,{placeholder:"Search...",className:"pl-8 w-[200px]",value:De,onChange:r=>yr(r.target.value)})]}),e.jsxs(w,{onClick:()=>{s(null),c(!0)},children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Add Finished Job"]})]})]}),e.jsx(be,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Le,{className:"table-fixed w-full",children:[e.jsxs(Be,{children:[e.jsxs(K,{children:[e.jsx(f,{colSpan:6,className:"text-center bg-blue-100",style:{borderRight:"1px solid black"},children:"Data"}),e.jsx(f,{colSpan:6,className:"text-center bg-green-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Wissels"}),e.jsx(f,{colSpan:3,className:"text-center bg-yellow-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Berekening"}),e.jsx(f,{colSpan:2,className:"text-center bg-purple-100",style:{borderTop:"1px solid black",borderRight:"1px solid black"},children:"Prestatie"}),e.jsx(f,{className:"w-[100px]"})]}),e.jsxs(K,{children:[e.jsx(f,{onClick:()=>A("date"),style:{width:"83px"},className:"cursor-pointer hover:bg-gray-100 border-r",children:e.jsxs("div",{className:"flex items-center",children:["Date ",G("date")]})}),e.jsx(f,{onClick:()=>A("orderNr"),style:{width:"65px"},className:"cursor-pointer hover:bg-gray-100 border-r",children:e.jsxs("div",{className:"flex items-center",children:["Order nr ",G("orderNr")]})}),e.jsx(f,{onClick:()=>A("orderName"),className:"cursor-pointer hover:bg-gray-100 min-w-[150px] border-r",children:e.jsxs("div",{className:"flex items-center",children:["Order ",G("orderName")]})}),e.jsx(f,{onClick:()=>A("pages"),style:{width:"40px"},className:"cursor-pointer hover:bg-gray-100 text-right border-r",children:e.jsxs("div",{className:"flex items-center justify-end",children:["Blz ",G("pages")]})}),e.jsx(f,{onClick:()=>A("exOmw"),style:{width:"40px"},className:"cursor-pointer hover:bg-gray-100 text-right leading-3 border-r",children:e.jsxs("div",{className:"flex items-center justify-end h-full",children:["Ex/",e.jsx("br",{}),"Omw. ",G("exOmw")]})}),e.jsx(f,{onClick:()=>A("netRun"),style:{width:"80px",borderRight:"1px solid black"},className:"cursor-pointer hover:bg-gray-100 text-right",children:e.jsxs("div",{className:"flex items-center justify-end",children:["Oplage netto ",G("netRun")]})}),e.jsx(f,{onClick:()=>A("startup"),style:{width:"55px"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-center",children:["Opstart ",G("startup")]})}),e.jsx(f,{onClick:()=>A("c4_4"),style:{width:"30px"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/4 ",G("c4_4")]})}),e.jsx(f,{onClick:()=>A("c4_0"),style:{width:"30px"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/0 ",G("c4_0")]})}),e.jsx(f,{onClick:()=>A("c1_0"),style:{width:"30px"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["1/0 ",G("c1_0")]})}),e.jsx(f,{onClick:()=>A("c1_1"),style:{width:"30px"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["1/1 ",G("c1_1")]})}),e.jsx(f,{onClick:()=>A("c4_1"),style:{width:"30px",borderRight:"1px solid black"},className:"cursor-pointer hover:bg-gray-100 text-center bg-gray-50 border border-black",children:e.jsxs("div",{className:"flex items-center justify-center",children:["4/1 ",G("c4_1")]})}),e.jsx(f,{style:{width:"90px"},className:"text-center border-r",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(w,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>oe(j("maxGross"),"maxGross"),title:j("maxGross")?.name||"Max Bruto",children:j("maxGross")?.name||"Max Bruto"}),e.jsx("div",{onClick:()=>A("maxGross"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:G("maxGross")})]})}),e.jsx(f,{style:{width:"90px"},className:"text-center border-r",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(w,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>oe(j("green"),"green"),title:j("green")?.name||"Groen",children:j("green")?.name||"Groen"}),e.jsx("div",{onClick:()=>A("green"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:G("green")})]})}),e.jsx(f,{style:{width:"90px",borderRight:"1px solid black"},className:"text-center",children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(w,{variant:"ghost",className:"h-auto p-0 font-bold hover:bg-transparent hover:text-blue-600 truncate max-w-[60px]",onClick:()=>oe(j("red"),"red"),title:j("red")?.name||"Rood",children:j("red")?.name||"Rood"}),e.jsx("div",{onClick:()=>A("red"),className:"cursor-pointer p-1 hover:bg-gray-200 rounded shrink-0",children:G("red")})]})}),e.jsx(f,{style:{width:"80px"},className:"text-center border-r",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Delta"})})}),e.jsx(f,{style:{width:"80px",borderRight:"1px solid black"},className:"text-center",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Delta %"})})}),e.jsx(f,{style:{width:"100px"},className:"text-center",children:e.jsx("div",{className:"flex items-center gap-1 justify-center",children:e.jsx("span",{className:"font-bold",children:"Acties"})})})]})]}),e.jsx(Ve,{children:wr.map(r=>e.jsxs(K,{children:[e.jsx(p,{children:r.date}),e.jsxs(p,{children:["DT ",r.orderNr]}),e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:r.orderName}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-0.5",children:[e.jsx("span",{className:"w-3 h-3 border-l border-b border-gray-300 mr-1 rounded-bl-sm inline-block"}),r.version]})]})}),e.jsxs(p,{className:"text-right",children:[R(r.pages)," blz"]}),e.jsx(p,{className:"text-right",children:r.exOmw}),e.jsx(p,{className:"text-right",style:{borderRight:"1px solid black"},children:R(r.netRun)}),e.jsx(p,{className:"bg-gray-50",children:e.jsx("div",{className:"flex justify-center",children:r.startup?e.jsx(qr,{className:"w-4 h-4 text-green-600"}):e.jsx("span",{className:"text-gray-300",children:"-"})})}),e.jsx(p,{className:"text-right bg-gray-50",children:R(r.c4_4)}),e.jsx(p,{className:"text-right bg-gray-50",children:R(r.c4_0)}),e.jsx(p,{className:"text-right bg-gray-50",children:R(r.c1_0)}),e.jsx(p,{className:"text-right bg-gray-50",children:R(r.c1_1)}),e.jsx(p,{className:"text-right bg-gray-50",style:{borderRight:"1px solid black"},children:R(r.c4_1)}),e.jsx(p,{className:"p-0 text-center",children:(()=>{const a=j("maxGross");return a?e.jsx(ge,{formula:a.formula,job:r,result:k(a.formula,r)}):R(r.maxGross)})()}),e.jsx(p,{className:"p-0 text-center",children:(()=>{const a=j("green");return a?e.jsx(ge,{formula:a.formula,job:r,result:k(a.formula,r)}):R(r.green)})()}),e.jsx(p,{className:"p-0 text-center",style:{borderRight:"1px solid black"},children:(()=>{const a=j("red");return a?e.jsx(ge,{formula:a.formula,job:r,result:k(a.formula,r)}):R(r.red)})()}),e.jsx(p,{className:"p-0 text-center",children:(()=>{const a=j("delta_number");return R(a?k(a.formula,r):r.delta_number)})()}),e.jsx(p,{className:"p-0 text-center",style:{borderRight:"1px solid black"},children:(()=>{const a=j("delta_percentage"),x=a?k(a.formula,r):R(r.delta_percentage),h=typeof x=="string"?parseFloat(x.replace(/\./g,"").replace(",","."))*100:x*100,T=Math.round(h*100)/100;return T+"%"})()}),e.jsx(p,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{size:"sm",variant:"ghost",className:"hover:bg-blue-100 text-blue-600",onClick:()=>Fr(r),children:e.jsx(tr,{className:"w-4 h-4"})}),e.jsx(w,{size:"sm",variant:"ghost",className:"hover:bg-red-100 text-red-500",onClick:()=>Tr(r.id),children:e.jsx(Ie,{className:"w-4 h-4"})})]})})]},r.id))})]})})})]})}),e.jsx(Me,{value:"parameters",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{children:[e.jsx(je,{children:e.jsx(Ne,{children:"Parameters"})}),e.jsxs(be,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Le,{children:[e.jsx(Be,{children:e.jsxs(K,{children:[e.jsx(f,{className:"w-[200px]",children:"Parameter"}),e.jsx(f,{className:"w-[50px] text-center",children:"Link"}),n.map(r=>e.jsx(f,{className:"text-center min-w-[120px]",children:r},r))]})}),e.jsxs(Ve,{children:[e.jsxs(K,{children:[e.jsx(p,{className:"font-medium",children:"Marge"}),e.jsx(p,{className:"text-center",children:e.jsx(te,{checked:B.margePercentage,onCheckedChange:()=>Z("margePercentage")})}),n.map(r=>e.jsx(p,{children:e.jsx("div",{className:"flex gap-2",children:e.jsx(g,{type:"text",placeholder:"%",className:"h-8",value:D[r]?.margePercentage||"",onChange:a=>X(r,"margePercentage",a.target.value)})})},r))]}),e.jsxs(K,{children:[e.jsx(p,{className:"font-medium",children:"Opstart"}),e.jsx(p,{className:"text-center",children:e.jsx(te,{checked:B.opstart,onCheckedChange:()=>Z("opstart")})}),n.map(r=>e.jsx(p,{className:"text-center",children:e.jsx(g,{type:"number",className:"h-8",value:D[r]?.opstart||0,onChange:a=>X(r,"opstart",Number(a.target.value))})},r))]}),[{id:"param_4_4",label:"4/4"},{id:"param_4_0",label:"4/0"},{id:"param_1_0",label:"1/0"},{id:"param_1_1",label:"1/1"},{id:"param_4_1",label:"4/1"}].map(r=>e.jsxs(K,{children:[e.jsx(p,{className:"font-medium",children:r.label}),e.jsx(p,{className:"text-center",children:e.jsx(te,{checked:B[r.id],onCheckedChange:()=>Z(r.id)})}),n.map(a=>e.jsx(p,{children:e.jsx(g,{type:"number",className:"h-8",value:D[a]?.[r.id]||0,onChange:x=>X(a,r.id,Number(x.target.value))})},a))]},r.id))]})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(w,{children:"Save Changes"})})]})]}),e.jsxs(fe,{children:[e.jsxs(je,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ne,{children:"Calculated Fields"}),e.jsxs(w,{onClick:()=>oe(),className:"gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Add Formula"]})]}),e.jsx(be,{children:ee.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:'No calculated fields yet. Click "Add Formula" to create one.'}):e.jsx("div",{className:"space-y-2",children:ee.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-sm text-gray-600 font-mono",children:r.formula}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Preview: ",k(r.formula,U[0])]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>oe(r),children:e.jsx(tr,{className:"w-4 h-4"})}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>Pr(r.id),children:e.jsx(Ie,{className:"w-4 h-4 text-red-500"})})]})]},r.id))})})]})]})})]}),e.jsx(Os,{open:l,onOpenChange:c,onSubmit:Cr,editJob:m}),e.jsx(Ds,{open:o,onOpenChange:_,onSubmit:L}),e.jsx(Ps,{open:v,onOpenChange:F,onSubmit:M}),e.jsx(ye,{open:Sr,onOpenChange:me,children:e.jsxs(_e,{className:"max-w-2xl",children:[e.jsxs(we,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),ue?"Edit Formula":"Create Calculated Field"]}),e.jsx(ke,{children:"Build a formula by clicking on fields, operators, and numbers below."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"formula-name",children:"Field Name *"}),e.jsx(g,{id:"formula-name",placeholder:"e.g., Total Cost",value:ne,onChange:r=>xe(r.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{children:"Target Column (Optional)"}),e.jsxs(Ze,{value:Ae||"none",onValueChange:r=>he(r==="none"?void 0:r),children:[e.jsx(er,{children:e.jsx(rr,{placeholder:"Select a column to display this formula"})}),e.jsxs(sr,{children:[e.jsx($,{value:"none",children:"None (Reference only)"}),e.jsx($,{value:"maxGross",children:"Max Bruto"}),e.jsx($,{value:"delta_number",children:"Delta Number"}),e.jsx($,{value:"delta_percentage",children:"Delta Percentage"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{children:"Formula"}),e.jsx(g,{value:W,onChange:r=>q(r.target.value),placeholder:"Type or click fields below to build formula...",className:"font-mono"}),e.jsx("div",{className:"p-3 border rounded-md bg-gray-50 min-h-[60px] flex flex-wrap gap-2 items-center",children:W?W.split(" ").filter(r=>r).map((r,a)=>{const x=le.some(b=>b.key===r)||ce.some(b=>b.key===r),h=Qe.includes(r),T=!isNaN(Number(r))&&r!=="";if(x){const b=le.find(y=>y.key===r)||ce.find(y=>y.key===r);return e.jsx(Ke,{variant:"outline",className:"bg-blue-50 border-blue-200",children:b?.label||r},a)}else return h?e.jsx("span",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-sm",children:r},a):T?e.jsx("span",{className:"px-2 py-1 bg-green-50 border border-green-200 rounded font-mono text-sm",children:r},a):e.jsx("span",{className:"font-mono text-sm",children:r},a)}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Formula will appear here..."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>q(""),children:"Clear"}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>q(r=>r.trim().split(" ").slice(0,-1).join(" ")),children:"Remove Last"})]})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"Finished Job Fields"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:le.map(r=>e.jsx(Ke,{variant:"outline",className:"cursor-pointer hover:bg-blue-100",onClick:()=>pe(r.key),children:r.label},r.key))})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"Parameters"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ce.map(r=>e.jsx(Ke,{variant:"outline",className:"cursor-pointer hover:bg-green-100",onClick:()=>pe(r.key),children:r.label},r.key))})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"Operators"}),e.jsx("div",{className:"flex gap-2 mt-2",children:Qe.map(r=>e.jsx(w,{variant:"outline",size:"sm",onClick:()=>pe(r),className:"w-10",children:r},r))})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"Number"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(g,{type:"number",placeholder:"Enter number",className:"w-32",onKeyDown:r=>{r.key==="Enter"&&(pe(r.target.value),r.target.value="")}}),e.jsx("span",{className:"text-xs text-gray-500 self-center",children:"Press Enter to add"})]})]})]}),e.jsxs("div",{className:"p-3 border rounded-md bg-blue-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Preview Result"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:Rr}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Using first job data with sample parameter values"})]})]}),e.jsxs(Fe,{children:[e.jsx(w,{variant:"outline",onClick:()=>me(!1),children:"Cancel"}),e.jsx(w,{onClick:Dr,disabled:!ne.trim()||!W.trim(),children:ue?"Update Formula":"Save Formula"})]})]})})]})}export{Ls as Drukwerken};
